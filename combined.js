$(window).on("load",function(){let e=0;$(".wrap-border.calculator-btn").on("click",function(e){let c={},a="";document.cookie="",c._costPerMetre=$("#total").html(),c._appliances=$(".choiceActiveBorder").data("appliances"),c._style=l,c._bath=+$("#bathtub").is(":checked"),c._shower=+$("#shower").is(":checked"),c._ceiling=$(":radio[name='ceiling']:checked").val(),c._flooring=$(":radio[name='flooring']:checked").val(),c._hygienicShower=+$("#hygienicShower").is(":checked"),c._secondGypsumLayer=+$("#secondGypsumLayer").is(":checked"),c._floorScreed=+$("#floorscreed").is(":checked"),c._heatedFlooring=+$("#heatedFlooring").val(),c._denoising=+$("#noise").is(":checked"),c._entranceDoors=+$("#doors").is(":checked"),c._conditioning=+$("#conditioning").val(),c._amountOfRooms=+$("#amountOfRooms").val(),c._amountOfBathrooms=+$("#amountOfBathrooms").val(),c._summedPrice=parseInt($("#totalWhole").html().replace(/ /,"")),c._appliancesBoolTotal=+$("#appliancesBool").is(":checked"),c._furnitureBool=+$("#furnitureBool").is(":checked"),c._space=parseFloat($("#space").val());for(let e in c)a=e+"="+c[e]+";",document.cookie=a}),$(".calculator-tab").on("click",function(){let e;e||(e="cozy");let c=parseInt($(this).attr("data-slider-index"));0==c?e="cozy":1==c?e="japandi":2==c?e="fusion":3==c?e="modern":4==c&&(e="neoclassic"),$(".calculator-slide").toggle(!1),$(".calculator-slide.main").toggle(!0),$(".calculator-slide"+`.${e}`).toggle(!0),$(".calculator-slider-side").slick("slickGoTo",0),$(".calculator-slider-option.active").removeClass("active"),$(".calculator-slider-option[data-slider-index='0']").addClass("active")}),$(".increment-field .increment").on("click",function(e){e.preventDefault(),$(this).siblings(".increment-input").val()<=0&&$(this).siblings(".increment-input").val(0)}),$(".choiceactive.card").toggleClass("choiceActiveBorder");let c=0,a=$(".main-slider");a.slick({arrows:!1,dots:!1,speed:425,draggable:!1,adaptiveHeight:!0,responsive:[{breakpoint:991,settings:{draggable:!0,infinite:!0,arrows:!0,dots:!1}},{breakpoint:478,settings:{draggable:!0,infinite:!0,arrows:!1,dots:!0}}]});let o=$(".calculator-slider-side");$(".calculator-slider-side").not(".slick-initialized").slick({dots:!1,speed:425,arrows:!1,draggable:!1,responsive:[{breakpoint:991,settings:"unslick"}]}),$(".slide-nav").on("click",function(c){$(".slide-nav.active").toggleClass("active"),$(this).addClass("active"),e=parseInt($(this).data("index")),a[0].slick.slickGoTo(e)});let i="";$(".slider-tab").on("click",function(){$(".slider-tab.w--current").toggleClass("w--current"),$(this).toggleClass("w--current"),0==(c=parseInt($(this).attr("data-slider-index")))?i="cozy":2==c?i="fusion":1==c?i="japandi":3==c?i="modern":4==c&&(i="neoclassic"),$(".main-slider").toggle(!0),$(".custom-style-section").toggle(!1),$(".slider-side").toggle(!0),$(".slide").toggle(!1),$(".slide.main").toggle(!0),$(".slide"+`.${i}`).toggle(!0),$(".style-heading, .style-note, .style-description").toggle(!1),$(".header-"+i).toggle(!0),$(".arrow-left, .arrow-right").toggle(!0),$(".main-slider").slick("refresh"),$(".slide-nav.active").removeClass("active"),$(".slide-nav:eq(0)").addClass("active"),$(".slider-container .checkmark").css("margin-left","0px"),$(".main-slider .color-var").toggle(!1),$(".main-slider .color-1").toggle(!0),$(".calculator-slide").toggle(!1),$(".calculator-slide.main").toggle(!0),$(".calculator-slide"+`.${i}`).toggle(!0),$(".calculator-tab.w--current").removeClass("w--current"),$(`.calculator-tab[data-slider-index='${c}']`).addClass("w--current"),$(".wrap-border.calculator-btn").toggle(!1),$(`.specification-${i}`).toggle(!0)}),$(".arrow-left").on("click",function(){$(".main-slider").slick("slickPrev");let e=$(".main-slider").slick("slickCurrentSlide");$(".slide-nav.active").removeClass("active"),$(`.slide-nav:eq(${e})`).addClass("active")}),$(".arrow-right").on("click",function(){$(".main-slider").slick("slickNext");let e=$(".main-slider").slick("slickCurrentSlide");$(".slide-nav.active").removeClass("active"),$(`.slide-nav:eq(${e})`).addClass("active")}),$(".preview-image, .blackbg-text").hover(function(){$(".video-cursor").css("opacity",1)},function(){$(".video-cursor").css("opacity",0)}),$(".project-link-image").hover(function(){$(".project-dot").css("opacity",1)},function(){$(".project-dot").css("opacity",0)}),$("#laminat").prop("checked",!0),$(".choice").on("click",function(e){if(!$("#appliancesBool").is(":checked"))return e.preventDefault(),$(".choiceActive").toggleClass("choiceActive"),void $(".choiceActiveBorder").toggleClass("choiceActiveBorder");$(this).hasClass("borderAcrive")||($(".choiceActive").toggleClass("choiceActive"),$(".choiceActiveBorder").toggleClass("choiceActiveBorder"),$(this).toggleClass("choiceActive"),$(this).parent().toggleClass("choiceActiveBorder"),$("#node").is(":checked")&&$("#appliances").prop("checked","checked"))}),$("#node").on("change",function(e){$("#node").is(":checked")&&$(".choiceActive")&&($(".choiceActive").toggleClass("choiceActive"),$(".choiceActiveBorder").toggleClass("choiceActiveBorder"))}),$("#appliancesBool").on("change",function(){$(this).is(":checked")&&!document.querySelector(".choiceActiveBorder")&&($(".choice").first().toggleClass("choiceActive"),$(".choice").first().parent().toggleClass("choiceActiveBorder"))}),$("form input").keydown(function(e){13!=e.keyCode||e.preventDefault()}),$(".calculator-tab").on("click",function(){0==(c=parseInt($(this).attr("data-slider-index")))?i="cozy":2==c?i="fusion":1==c?i="japandi":3==c?i="modern":4==c&&(i="neoclassic"),i||(i="cozy"),$(".calculator-slide").toggle(!1),$(".calculator-slide.main").toggle(!0),$(".calculator-slide"+`.${i}`).toggle(!0),$(".calculator-tab.w--current").removeClass("w--current"),$(this).addClass("w--current"),$(".wrap-border.calculator-btn").toggle(!1),$(`.specification-${i}`).toggle(!0),$(".calculator .checkmark").css("margin-left","0px"),$(".calculator-slider-side .color-var").toggle(!1),$(".calculator-slider-side .color-1").toggle(!0)}),$(".calculator-slider-option").on("click",function(){$(".calculator-slider-option.active").removeClass("active"),$(this).addClass("active"),e=parseInt($(this).data("slider-index")),r=e,o[0].slick.slickGoTo(e)}),$(".calculator-button, .calculate, .calculator-tab").on("click",function(){$(".calculator-slider-side").slick("refresh")}),$(".arrow-right.calculator-arrow").on("click",function(){$(".calculator-slider-side").slick("slickNext");let e=parseInt($(".calculator-slider-option.active").data("slider-index"));$(".calculator-slider-option.active").removeClass("active"),e>=4?e=0:e+=1,$(`.calculator-slider-option:eq(${e})`).addClass("active")}),$(".arrow-left.calculator-arrow").on("click",function(){$(".calculator-slider-side").slick("slickPrev");let e=parseInt($(".calculator-slider-option.active").data("slider-index"));$(".calculator-slider-option.active").removeClass("active"),e=e-=1,$(`.calculator-slider-option:eq(${e})`).addClass("active")}),$(".wrap-border.calculator-btn .button").click(function(){let e=new FormData,c="cozy"==t.style?"Козі":"japandi"==t.style?"Джапанді":"fusion"==t.style?"Фьюжн":"modern"==t.style?"Модерн":"Нео Класика",a=t.space<60?4:t.space<=80?5:t.space<=100?6:t.space<=130?7:t.space<=150?8:t.space<=175?9:10;e.append("Стиль",c),e.append("Ціна за метр",$("#total").html()),e.append("Загальна ціна",$("#totalWhole").html()),e.append("Площа",$("#space").val()),e.append("Кількість кімнат",$("#amountOfRooms").val()),e.append("Кількість санвузлів",$("#amountOfBathrooms").val()),e.append("Ванна",s($("#bathtub").prop("checked"))),e.append("Душ",s($("#shower").prop("checked")));let o="stretch ceiling"==$(":radio[name='ceiling']:checked").val()?"Натяжна матова":"gapless"==$(":radio[name='ceiling']:checked").val()?"Натяжна бесщелева матова":"Гіпсокартон",i="laminat"==$(":radio[name='flooring']:checked").val()?"Ламінат":"vynil"==$(":radio[name='flooring']:checked").val()?"Вінілова підлога":"Паркет",l=null==$(".choiceActiveBorder").data("appliances")?"Не обрано":$(".choiceActiveBorder").data("appliances").substr(0,1).toUpperCase()+$(".choiceActiveBorder").data("appliances").substr(1);function s(e){return 1==!!e?"Обрано":"Не обрано"}e.append("Стеля",o),e.append("Підлогове покриття",i),e.append("Стяжка підлоги",s($("#floorscreed").is(":checked"))),e.append("Шумоізоляція",s($("#noise").is(":checked"))),e.append("Вхідні двері",s($("#doors").is(":checked"))),e.append("Другий шар гіпсокартону",s($("#secondGypsumLayer").is(":checked"))),e.append("Гігієнічний душ",s($("#hygienicShower").is(":checked"))),e.append("Тепла підлога",$("#heatedFlooring").val()),e.append("Кондиціювання",$("#conditioning").val()),e.append("Меблі",s($("#furnitureBool").is(":checked"))),e.append("Техніка",l),e.append("Термін виконання робіт",a);fetch("https://script.google.com/macros/s/AKfycbxiJPHg5oz88UhS0apuylDhgjLskSLo-Dt2mvF6VA/exec",{method:"POST",body:e}).then(e=>console.log("Success!",e)).catch(e=>console.error("Error!",e.message))});let l="cozy";$("#space").val(50);let t={style:"cozy",bath:1,shower:0,ceiling:"stretch ceiling",flooring:"laminat",hygienic_shower:0,second_gypsum_layer:0,floor_screed:0,heated_flooring:0,denoising:0,entrance_doors:0,conditioning:0,amount_of_rooms:2,amount_of_bathrooms:1,appliances:"gorenje",appliances_bool_total:0,furniture_bool:1,space:50};async function s(e){n();let c=await fetch("https://api.fortes.agency/calc",{body:JSON.stringify(t),headers:{"Content-Type":"application/json"},method:"POST"}),a=(await c.json()).cost_per_meter;function o(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}$("#total").html(o(Math.round(parseFloat(a)))),$("#totalWhole").html(o(Math.round(parseFloat(a)*parseFloat(e))))}function n(){t.space=+$("#space").val(),t.amount_of_rooms=+$("#amountOfRooms").val(),t.amount_of_bathrooms=+$("#amountOfBathrooms").val(),t.heated_flooring=+$("#heatedFlooring").val(),t.conditioning=+$("#conditioning").val(),t.hygienic_shower=+$("#hygienicShower").is(":checked"),t.second_gypsum_layer=+$("#secondGypsumLayer").is(":checked"),t.furniture_bool=+$("#furnitureBool").is(":checked"),t.bath=+$("#bathtub").is(":checked"),t.shower=+$("#shower").is(":checked"),t.appliances_bool_total=+$("#appliancesBool").is(":checked"),t.floor_screed=+$("#floorscreed").is(":checked"),t.denoising=+$("#noise").is(":checked"),t.entrance_doors=+$("#doors").is(":checked"),t.ceiling=$(":radio[name='ceiling']:checked").val(),t.flooring=$(":radio[name='flooring']:checked").val()}function d(e){0==e?(l="cozy",t.style="cozy"):2==e?(l="fusion",t.style="fusion"):1==e?(l="japandi",t.style="japandi"):3==e?(l="modern",t.style="modern"):4==e&&(l="neoclassic",t.style="neoclassic")}$("input").on("change",function(){n(),s(t.space)}),$("#space").on("focusout",function(e){if($(this).val($(this).val().match(/\d*\.?\d+/)),t.space=+$("#space").val(),s(t.space),0==t.space||0==t.amountOfRooms)return $("#total").html(0),void $("#totalWhole").html(0)}),$(".slider-tab").click(function(){d($(this).data("slider-index")),s(t.space)}),$("#space").on("focusout",function(e){(parseInt($(this).val())<30||!$(this).val())&&($(this).val(30),t.space=+$("#space").val(),s(30))}),$(".increment-field .increment").on("click",function(e){if(e.preventDefault(),$(this).siblings(".increment-input").val(parseInt($(this).siblings(".increment-input").val())+parseInt($(this).val())),"0"===$(this).siblings(".increment-input").val()?"1"===$(this).val()?$(this).siblings($(".increment")).toggleClass("disabled"):$(this).toggleClass("disabled"):parseInt($(this).siblings(".increment-input").val())>0&&$(this).siblings(".disabled").toggleClass("disabled"),0==t.amountOfRooms)return $("#total").html(0),void $("#totalWhole").html(0);s(t.space)}),$(".calculator-tab").on("click",function(){number=parseInt($(this).data("slider-index")),$(".calculator-slide").toggle(!1),$(".calculator-slide.main").toggle(!0),$(".calculator-slide."+t.style).toggle(!0),d(number),console.log(t.style),s(t.space)}),$("#calculate").on("click",function(){let e=parseInt($(".slider-tab.w--current").data("slider-index"));d(e),$(".calculator-tab").removeClass("w--current"),$(".calculator-tab[data-slider-index='"+e+"']").addClass("w--current"),s(t.space),$(".calculator-slider-side").slick("slickGoTo",0),$(".calculator-slide").toggle(!1),$(".calculator-slide.main").toggle(!0),$(".calculator-slide."+l).toggle(!0),$(".calculator-slider-option.active").removeClass("active"),$(".calculator-slider-option:eq(0)").addClass("active")}),$(".calculatecozy").on("click",function(){t.style="cozy",l="cozy;",$("calculator-tab.w--current").removeClass("w--current"),$(".wrap-border.calculator-tab .custom-style").css("color","black"),$(".wrap-border.calculator-tab .custom-style").css("background","white"),$("calculator-tab:eq(0)").addClass("w--current"),$(".calculator-tab").removeClass("w--current"),$(".calculator-tab:eq(0)").addClass("w--current"),s(t.space),$(".calculator-slider-side").slick("slickGoTo",0),$(".calculator-slide").toggle(!1),$(".calculator-slide.main, .calculator-slide.cozy").toggle(!0),$(".calculator-slider-option.active").removeClass("active"),$(".calculator-slider-option:eq(0)").addClass("active")}),$(".choice").on("click",function(){$("#node").is(":checked")&&($(".choiceActiveBorder").removeClass("choiceActiveBorder"),$(this).parent().toggleClass("choiceActiveBorder"),$("#appliancesBool").prop("checked",!0),$("#node").siblings("div").removeClass("w--redirected-checked"),$("#appliancesBool").siblings("div").addClass("w--redirected-checked")),t.appliances_bool_total=1,t.appliances=$(this).data("appliances"),s(t.space)}),$("#node").on("click",function(){t.appliances_bool_total=0,s(t.space)}),$("#appliancesBool").on("click",function(){$(this).is(":checked")&&(document.querySelector(".choiceActiveBorder")||(t.appliances_bool_total=1,t.appliances="gorenje",s(t.space)))}),$("#appliancesBool").on("change",function(){$(this).is(":checked")&&(t.appliances_bool_total=1,s(t.space))}),s(t.space)});
