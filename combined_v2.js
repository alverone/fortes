$(window).on("load",function(){let e=0;$(".wrap-border.calculator-btn").on("click",function(e){let a={},t="";document.cookie="",a._costPerMetre=$("#total").html(),a._appliances=$(".choiceActiveBorder").data("appliances"),a._style=style,a._bath=+$("#bathtub").is(":checked"),a._shower=+$("#shower").is(":checked"),a._ceiling=$(":radio[name='ceiling']:checked").val(),a._flooring=$(":radio[name='flooring']:checked").val(),a._hygienicShower=+$("#hygienicShower").is(":checked"),a._secondGypsumLayer=+$("#secondGypsumLayer").is(":checked"),a._floorScreed=+$("#floorscreed").is(":checked"),a._heatedFlooring=+$("#heatedFlooring").val(),a._denoising=+$("#noise").is(":checked"),a._entranceDoors=+$("#doors").is(":checked"),a._conditioning=+$("#conditioning").val(),a._amountOfRooms=+$("#amountOfRooms").val(),a._amountOfBathrooms=+$("#amountOfBathrooms").val(),a._summedPrice=parseInt($("#totalWhole").html().replace(/ /,"")),a._appliancesBoolTotal=+$("#appliancesBool").is(":checked"),a._furnitureBool=+$("#furnitureBool").is(":checked"),a._space=parseFloat($("#space").val());for(let e in a)t=e+"="+a[e]+";",document.cookie=t}),$(".calculator-tab").on("click",function(){let e;e||(e="cozy");let a=parseInt($(this).attr("data-slider-index"));0==a?e="cozy":1==a?e="japandi":2==a?e="fusion":3==a?e="modern":4==a&&(e="neoclassic"),$(".calculator-slide").toggle(!1),$(".calculator-slide.main").toggle(!0),$(".calculator-slide"+`.${e}`).toggle(!0),$(".calculator-slider-side").slick("slickGoTo",0),$(".calculator-slider-option.active").removeClass("active"),$(".calculator-slider-option[data-slider-index='0']").addClass("active")}),$(".increment-field .increment").on("click",function(e){e.preventDefault(),$(this).siblings(".increment-input").val()<=0&&$(this).siblings(".increment-input").val(0)}),$(".choiceactive.card").toggleClass("choiceActiveBorder");let a=0,t=$(".main-slider");t.slick({arrows:!1,dots:!1,speed:425,draggable:!1,adaptiveHeight:!0,responsive:[{breakpoint:991,settings:{draggable:!0,infinite:!0,arrows:!0,dots:!1}},{breakpoint:478,settings:{draggable:!0,infinite:!0,arrows:!1,dots:!0}}]});let c=$(".calculator-slider-side");$(".calculator-slider-side").not(".slick-initialized").slick({dots:!1,speed:425,arrows:!1,draggable:!1,responsive:[{breakpoint:991,settings:"unslick"}]}),$(".slide-nav").on("click",function(a){$(".slide-nav.active").toggleClass("active"),$(this).addClass("active"),e=parseInt($(this).data("index")),t[0].slick.slickGoTo(e)});let o="";$(".slider-tab").on("click",function(){$(".slider-tab.w--current").toggleClass("w--current"),$(this).toggleClass("w--current"),0==(a=parseInt($(this).attr("data-slider-index")))?o="cozy":2==a?o="fusion":1==a?o="japandi":3==a?o="modern":4==a&&(o="neoclassic"),$(".main-slider").toggle(!0),$(".custom-style-section").toggle(!1),$(".slider-side").toggle(!0),$(".slide").toggle(!1),$(".slide.main").toggle(!0),$(".slide"+`.${o}`).toggle(!0),$(".style-heading, .style-note, .style-description").toggle(!1),$(".header-"+o).toggle(!0),$(".arrow-left, .arrow-right").toggle(!0),$(".main-slider").slick("refresh"),$(".slide-nav.active").removeClass("active"),$(".slide-nav:eq(0)").addClass("active"),$(".slider-container .checkmark").css("margin-left","0px"),$(".main-slider .color-var").toggle(!1),$(".main-slider .color-1").toggle(!0),$(".calculator-slide").toggle(!1),$(".calculator-slide.main").toggle(!0),$(".calculator-slide"+`.${o}`).toggle(!0),$(".calculator-tab.w--current").removeClass("w--current"),$(`.calculator-tab[data-slider-index='${a}']`).addClass("w--current"),$(".wrap-border.calculator-btn").toggle(!1),$(`.specification-${o}`).toggle(!0)}),$(".arrow-left").on("click",function(){$(".main-slider").slick("slickPrev");let e=$(".main-slider").slick("slickCurrentSlide");$(".slide-nav.active").removeClass("active"),$(`.slide-nav:eq(${e})`).addClass("active")}),$(".arrow-right").on("click",function(){$(".main-slider").slick("slickNext");let e=$(".main-slider").slick("slickCurrentSlide");$(".slide-nav.active").removeClass("active"),$(`.slide-nav:eq(${e})`).addClass("active")}),$(".preview-image, .blackbg-text").hover(function(){$(".video-cursor").css("opacity",1)},function(){$(".video-cursor").css("opacity",0)}),$(".project-link-image").hover(function(){$(".project-dot").css("opacity",1)},function(){$(".project-dot").css("opacity",0)}),$("#laminat").prop("checked",!0),$(".choice").on("click",function(e){if(!$("#appliancesBool").is(":checked"))return e.preventDefault(),$(".choiceActive").toggleClass("choiceActive"),void $(".choiceActiveBorder").toggleClass("choiceActiveBorder");$(this).hasClass("borderAcrive")||($(".choiceActive").toggleClass("choiceActive"),$(".choiceActiveBorder").toggleClass("choiceActiveBorder"),$(this).toggleClass("choiceActive"),$(this).parent().toggleClass("choiceActiveBorder"),$("#node").is(":checked")&&$("#appliances").prop("checked","checked"))}),$("#node").on("change",function(e){$("#node").is(":checked")&&$(".choiceActive")&&($(".choiceActive").toggleClass("choiceActive"),$(".choiceActiveBorder").toggleClass("choiceActiveBorder"))}),$("#appliancesBool").on("change",function(){$(this).is(":checked")&&!document.querySelector(".choiceActiveBorder")&&($(".choice").first().toggleClass("choiceActive"),$(".choice").first().parent().toggleClass("choiceActiveBorder"))}),$("form input").keydown(function(e){13!=e.keyCode||e.preventDefault()}),$(".calculator-tab").on("click",function(){0==(a=parseInt($(this).attr("data-slider-index")))?o="cozy":2==a?o="fusion":1==a?o="japandi":3==a?o="modern":4==a&&(o="neoclassic"),o||(o="cozy"),$(".calculator-slide").toggle(!1),$(".calculator-slide.main").toggle(!0),$(".calculator-slide"+`.${o}`).toggle(!0),$(".calculator-tab.w--current").removeClass("w--current"),$(this).addClass("w--current"),$(".wrap-border.calculator-btn").toggle(!1),$(`.specification-${o}`).toggle(!0),$(".calculator .checkmark").css("margin-left","0px"),$(".calculator-slider-side .color-var").toggle(!1),$(".calculator-slider-side .color-1").toggle(!0)}),$(".calculator-slider-option").on("click",function(){$(".calculator-slider-option.active").removeClass("active"),$(this).addClass("active"),e=parseInt($(this).data("slider-index")),r=e,c[0].slick.slickGoTo(e)}),$(".calculator-button, .calculate, .calculator-tab").on("click",function(){$(".calculator-slider-side").slick("refresh")}),$(".arrow-right.calculator-arrow").on("click",function(){$(".calculator-slider-side").slick("slickNext");let e=parseInt($(".calculator-slider-option.active").data("slider-index"));$(".calculator-slider-option.active").removeClass("active"),e>=4?e=0:e+=1,$(`.calculator-slider-option:eq(${e})`).addClass("active")}),$(".arrow-left.calculator-arrow").on("click",function(){$(".calculator-slider-side").slick("slickPrev");let e=parseInt($(".calculator-slider-option.active").data("slider-index"));$(".calculator-slider-option.active").removeClass("active"),e=e-=1,$(`.calculator-slider-option:eq(${e})`).addClass("active")}),$(".wrap-border.calculator-btn .button").click(function(){let e=new FormData,a="cozy"==data.style?"Козі":"japandi"==data.style?"Джапанді":"fusion"==data.style?"Фьюжн":"modern"==data.style?"Модерн":"Нео Класика",t=data.space<60?4:data.space<=80?5:data.space<=100?6:data.space<=130?7:data.space<=150?8:data.space<=175?9:10;e.append("Стиль",a),e.append("Ціна за метр",$("#total").html()),e.append("Загальна ціна",$("#totalWhole").html()),e.append("Площа",$("#space").val()),e.append("Кількість кімнат",$("#amountOfRooms").val()),e.append("Кількість санвузлів",$("#amountOfBathrooms").val()),e.append("Ванна",i($("#bathtub").prop("checked"))),e.append("Душ",i($("#shower").prop("checked")));let c="stretch ceiling"==$(":radio[name='ceiling']:checked").val()?"Натяжна матова":"gapless"==$(":radio[name='ceiling']:checked").val()?"Натяжна бесщелева матова":"Гіпсокартон",o="laminat"==$(":radio[name='flooring']:checked").val()?"Ламінат":"vynil"==$(":radio[name='flooring']:checked").val()?"Вінілова підлога":"Паркет",l=null==$(".choiceActiveBorder").data("appliances")?"Не обрано":$(".choiceActiveBorder").data("appliances").substr(0,1).toUpperCase()+$(".choiceActiveBorder").data("appliances").substr(1);function i(e){return 1==!!e?"Обрано":"Не обрано"}e.append("Стеля",c),e.append("Підлогове покриття",o),e.append("Стяжка підлоги",i($("#floorscreed").is(":checked"))),e.append("Шумоізоляція",i($("#noise").is(":checked"))),e.append("Вхідні двері",i($("#doors").is(":checked"))),e.append("Другий шар гіпсокартону",i($("#secondGypsumLayer").is(":checked"))),e.append("Гігієнічний душ",i($("#hygienicShower").is(":checked"))),e.append("Тепла підлога",$("#heatedFlooring").val()),e.append("Кондиціювання",$("#conditioning").val()),e.append("Меблі",i($("#furnitureBool").is(":checked"))),e.append("Техніка",l),e.append("Термін виконання робіт",t);fetch("https://script.google.com/macros/s/AKfycbxiJPHg5oz88UhS0apuylDhgjLskSLo-Dt2mvF6VA/exec",{method:"POST",body:e}).then(e=>console.log("Success!",e)).catch(e=>console.error("Error!",e.message))})});let style="cozy",appliancesCookie="";$("#space").val(50);let data={style:"cozy",bath:1,shower:0,ceiling:"stretch ceiling",flooring:"laminat",hygienic_shower:0,second_gypsum_layer:0,floor_screed:0,heated_flooring:0,denoising:0,entrance_doors:0,conditioning:0,amount_of_rooms:2,amount_of_bathrooms:1,appliances:"gorenje",appliances_bool_total:0,furniture_bool:1,space:50};async function returnValue(e){updateUserData();let a=await fetch("https://api.fortes.agency/calc",{body:JSON.stringify(data),headers:{"Content-Type":"application/json"},method:"POST"}),t=(await a.json()).cost_per_meter;function c(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}$("#total").html(c(Math.round(parseFloat(t)))),$("#totalWhole").html(c(Math.round(parseFloat(t)*parseFloat(e))))}function updateUserData(){data.space=+$("#space").val(),data.amount_of_rooms=+$("#amountOfRooms").val(),data.amount_of_bathrooms=+$("#amountOfBathrooms").val(),data.heated_flooring=+$("#heatedFlooring").val(),data.conditioning=+$("#conditioning").val(),data.hygienic_shower=+$("#hygienicShower").is(":checked"),data.second_gypsum_layer=+$("#secondGypsumLayer").is(":checked"),data.furniture_bool=+$("#furnitureBool").is(":checked"),data.bath=+$("#bathtub").is(":checked"),data.shower=+$("#shower").is(":checked"),data.appliances_bool_total=+$("#appliancesBool").is(":checked"),data.floor_screed=+$("#floorscreed").is(":checked"),data.denoising=+$("#noise").is(":checked"),data.entrance_doors=+$("#doors").is(":checked"),data.ceiling=$(":radio[name='ceiling']:checked").val(),data.flooring=$(":radio[name='flooring']:checked").val()}function getUserStyle(e){0==e?(style="cozy",data.style="cozy"):2==e?(style="fusion",data.style="fusion"):1==e?(style="japandi",data.style="japandi"):3==e?(style="modern",data.style="modern"):4==e&&(style="neoclassic",data.style="neoclassic")}function returnRoundedPrice(e){return Math.round(e/(28.5*data.space))}$("input").on("change",function(){updateUserData(),returnValue(data.space)}),$("#space").on("focusout",function(e){if($(this).val($(this).val().match(/\d*\.?\d+/)),data.space=+$("#space").val(),returnValue(data.space),0==data.space||0==data.amountOfRooms)return $("#total").html(0),void $("#totalWhole").html(0)}),$(".slider-tab").click(function(){getUserStyle($(this).data("slider-index")),returnValue(data.space)}),$("#space").on("focusout",function(e){(parseInt($(this).val())<30||!$(this).val())&&($(this).val(30),data.space=+$("#space").val(),returnValue(30))}),$(".increment-field .increment").on("click",function(e){if(e.preventDefault(),$(this).siblings(".increment-input").val(parseInt($(this).siblings(".increment-input").val())+parseInt($(this).val())),"0"===$(this).siblings(".increment-input").val()?"1"===$(this).val()?$(this).siblings($(".increment")).toggleClass("disabled"):$(this).toggleClass("disabled"):parseInt($(this).siblings(".increment-input").val())>0&&$(this).siblings(".disabled").toggleClass("disabled"),0==data.amountOfRooms)return $("#total").html(0),void $("#totalWhole").html(0);returnValue(data.space)}),$(".calculator-tab").on("click",function(){number=parseInt($(this).data("slider-index")),$(".calculator-slide").toggle(!1),$(".calculator-slide.main").toggle(!0),$(".calculator-slide."+data.style).toggle(!0),getUserStyle(number),console.log(data.style),returnValue(data.space)}),$("#calculate").on("click",function(){let e=parseInt($(".slider-tab.w--current").data("slider-index"));getUserStyle(e),$(".calculator-tab").removeClass("w--current"),$(".calculator-tab[data-slider-index='"+e+"']").addClass("w--current"),returnValue(data.space),$(".calculator-slider-side").slick("slickGoTo",0),$(".calculator-slide").toggle(!1),$(".calculator-slide.main").toggle(!0),$(".calculator-slide."+style).toggle(!0),$(".calculator-slider-option.active").removeClass("active"),$(".calculator-slider-option:eq(0)").addClass("active")}),$(".calculatecozy").on("click",function(){data.style="cozy",style="cozy;",$("calculator-tab.w--current").removeClass("w--current"),$(".wrap-border.calculator-tab .custom-style").css("color","black"),$(".wrap-border.calculator-tab .custom-style").css("background","white"),$("calculator-tab:eq(0)").addClass("w--current"),$(".calculator-tab").removeClass("w--current"),$(".calculator-tab:eq(0)").addClass("w--current"),returnValue(data.space),$(".calculator-slider-side").slick("slickGoTo",0),$(".calculator-slide").toggle(!1),$(".calculator-slide.main, .calculator-slide.cozy").toggle(!0),$(".calculator-slider-option.active").removeClass("active"),$(".calculator-slider-option:eq(0)").addClass("active")}),$(".choice").on("click",function(){$("#node").is(":checked")&&($(".choiceActiveBorder").removeClass("choiceActiveBorder"),$(this).parent().toggleClass("choiceActiveBorder"),$("#appliancesBool").prop("checked",!0),$("#node").siblings("div").removeClass("w--redirected-checked"),$("#appliancesBool").siblings("div").addClass("w--redirected-checked")),data.appliances_bool_total=1,data.appliances=$(this).data("appliances"),returnValue(data.space)}),$("#node").on("click",function(){data.appliances_bool_total=0,returnValue(data.space)}),$("#appliancesBool").on("click",function(){$(this).is(":checked")&&(document.querySelector(".choiceActiveBorder")||(data.appliances_bool_total=1,data.appliances="gorenje",returnValue(data.space)))}),$("#appliancesBool").on("change",function(){$(this).is(":checked")&&(data.appliances_bool_total=1,returnValue(data.space))}),returnValue(data.space);
