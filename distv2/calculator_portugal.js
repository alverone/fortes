(()=>{"use strict";var N={},h=(t=>(t.Cozy="cozy",t.Japandi="japandi",t.Modern="modern",t.Fusion="fusion",t.NeoClassic="neoclassic",t))(h||{});(t=>{function e(n){return n==="japandi"?"japandi":n==="neoclassic"?"neoclassic":n==="modern"?"modern":n==="fusion"?"fusion":"cozy"}t.fromString=e;function s(n){return n===0?"cozy":n===1?"japandi":n===2?"fusion":n===3?"modern":"neoclassic"}t.fromNumber=s;function i(n){switch(n){case"neoclassic":return"\u041D\u0435\u043E \u041A\u043B\u0430\u0441\u0438\u043A\u0430";case"japandi":return"\u0414\u0436\u0430\u043F\u0430\u043D\u0434\u0456";case"fusion":return"\u0424\u044C\u044E\u0436\u043D";case"modern":return"\u041C\u043E\u0434\u0435\u0440\u043D";case"cozy":default:return"\u041A\u043E\u0437\u0456"}}t.inUkrainian=i})(h||(h={}));class m{static formatCurrency(e){return Intl.NumberFormat("uk-UA",{maximumFractionDigits:2}).format(e)}}var p=(t=>(t[t.uk=0]="uk",t[t.en=1]="en",t))(p||{});class y{constructor(e,s=!1){if(s)switch(e){case 0:this._init();case 1:this._initPortugal();default:this._init()}}get(e){try{return JSON.parse(localStorage.getItem(e))}catch(s){return localStorage.getItem(e)}}set(e,s){localStorage.setItem(e,s.toString())}_init(){this.set("style","cozy"),this.set("bath",!0),this.set("shower",!1),this.set("ceiling","stretch ceiling"),this.set("flooring","laminat"),this.set("hygienic_shower",!1),this.set("second_gypsum_layer",!1),this.set("floor_screed",!1),this.set("heated_flooring",!1),this.set("denoising",!1),this.set("entrance_doors",!1),this.set("conditioning",!1),this.set("amount_of_rooms",2),this.set("amount_of_bathrooms",1),this.set("appliances","gorenje"),this.set("appliances_bool_total",!1),this.set("furniture_bool",!0),this.set("space",50),this.set("color",1)}_initPortugal(){this.set("style","cozy"),this.set("color",1),this.set("space",50),this.set("amount_of_rooms",2),this.set("amount_of_bathrooms",1),this.set("bath",!0),this.set("shower",!1),this.set("flooring","laminat"),this.set("finishing_materials",!1),this.set("demontage",!1),this.set("cement_screed",!1),this.set("heated_flooring",0),this.set("denoising",!1),this.set("entrance_doors",!1),this.set("windows_installation",0),this.set("builtin_furniture",!1),this.set("conditioning",0),this.set("furniture_bool",!1),this.set("appliances_bool_total",!1),this.set("appliances","gorenje"),this.set("transportation_expenses",5)}storageToRequestBody(e){const s={};for(const i in e)if(!(i==="length"||i=="costPerMetre"||i=="color")){if(String(e[i])==="true"){s[i]=1;continue}else if(String(e[i])==="false"){s[i]=0;continue}if(isFinite(Number(e[i]))){s[i]=Number(e[i]);continue}s[i]=e[i]}return JSON.stringify(s)}}function k(t,e,s){var i,n,o;e===void 0&&(e=50),s===void 0&&(s={});var f=(i=s.isImmediate)!=null&&i,c=(n=s.callback)!=null&&n,a=s.maxWait,r=Date.now(),l=[];function j(){if(a!==void 0){var u=Date.now()-r;if(u+e>=a)return a-u}return e}var _=function(){var u=[].slice.call(arguments),d=this;return new Promise(function(g,C){var I=f&&o===void 0;if(o!==void 0&&clearTimeout(o),o=setTimeout(function(){if(o=void 0,r=Date.now(),!f){var b=t.apply(d,u);c&&c(b),l.forEach(function(F){return(0,F.resolve)(b)}),l=[]}},j()),I){var v=t.apply(d,u);return c&&c(v),g(v)}l.push({resolve:g,reject:C})})};return _.cancel=function(u){o!==void 0&&clearTimeout(o),l.forEach(function(d){return(0,d.reject)(u)}),l=[]},_}var w=(t,e,s)=>new Promise((i,n)=>{var o=a=>{try{c(s.next(a))}catch(r){n(r)}},f=a=>{try{c(s.throw(a))}catch(r){n(r)}},c=a=>a.done?i(a.value):Promise.resolve(a.value).then(o,f);c((s=s.apply(t,e)).next())});$(function(){const t=new y(p.en,!1),e=$("#space"),s=$("#total"),i=$("#totalWhole"),n=$("#totalWholeVAT"),o=k(f,300);e.val(50),o(),$(".calculator input").not(".form-2 input").on("change",()=>{c(),o()}),e.on("focusout",function(){if($(this).val($(this).val().toString().match(/\d*\.?\d+/)),t.set("space",e.val()),t.get("space")===0||t.get("amount_of_rooms")===0){s.html("0"),i.html("0");return}o()}),e.on("focusout",function(){(parseInt($(this).val().toString())<30||!$(this).val())&&($(this).val(30),t.set("space",e.val()),o())}),$(".increment-field .increment").on("click",function(a){a.preventDefault();const r=$(this).siblings(".increment-input");if(r.val(parseInt(r.val())+parseInt($(this).val())),r.val()==="0"?$(this).val()==="1"?$(this).siblings(".increment").toggleClass("disabled"):$(this).toggleClass("disabled"):parseInt(r.val())>0&&$(this).siblings(".disabled").toggleClass("disabled"),t.get("amount_of_rooms")==0){s.html("0"),i.html("0");return}o()}),$(".calculator-tab, .tab-new").on("click",function(){const a=parseInt($(this).data("slider-index"));t.set("style",h.fromNumber(a)),o()}),$(".choice").on("click",function(){t.set("appliances_bool_total",!0),t.set("appliances",$(this).data("appliances")),o()}),$("#node").on("click",function(){t.set("appliances_bool_total",!1),o()}),$("#appliancesBool").on("click",function(){$(this).is(":checked")&&(document.querySelector(".choice-gradient.gradientrevamped")||(t.set("appliances_bool_total",1),t.set("appliances","gorenje"),o()))}),$("#appliancesBool").on("change",function(){$(this).is(":checked")&&(t.set("appliances_bool_total",!0),o())});function f(){return w(this,null,function*(){c();const r=yield(yield fetch("https://api.fortes.agency/calc?country=portugal",{body:t.storageToRequestBody(localStorage),headers:{"Content-Type":"application/json"},method:"POST"})).json(),l=parseFloat(r.cost_per_meter);t.set("costPerMetre",l),t.set("summedPrice",l*t.get("space")*1.23),s.html(m.formatCurrency(l)),i.html(m.formatCurrency(l*t.get("space"))),n.html(m.formatCurrency(l*t.get("space")*1.23))})}function c(){t.set("space",e.val()),t.set("amount_of_rooms",$("#amountOfRooms").val()),t.set("amount_of_bathrooms",$("#amountOfBathrooms").val()),t.set("windows_installation",$("#amountOfWindows").val()),t.set("demontage",$("#dismantlingWorks").is(":checked")),t.set("heated_flooring",$("#heatedFlooring").val()),t.set("conditioning",$("#conditioning").val()),t.set("builtin_furiture",$("#builtinFurniture").is(":checked")),t.set("cement_screed",$("#cementScreed").is(":checked")),t.set("finishing_materials",$("#finishingMaterials").is(":checked")),t.set("furniture_bool",$("#furnitureBool").is(":checked")),t.set("bath",$("#bathtub").is(":checked")),t.set("shower",$("#shower").is(":checked")),t.set("appliances_bool_total",$("#appliancesBool").is(":checked")),t.set("denoising",$("#noise").is(":checked")),t.set("entrance_doors",$("#doors").is(":checked")),t.set("flooring",$(":radio[name='flooring']:checked").val()),t.set("transportation_expenses",$("#distance").val())}})})();
