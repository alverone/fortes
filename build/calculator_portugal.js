(()=>{"use strict";var t,e=(t=>(t.Cozy="cozy",t.Japandi="japandi",t.Modern="modern",t.Fusion="fusion",t.NeoClassic="neoclassic",t))(e||{});(t=e||(e={})).fromString=function(t){return"cozy"===t?"cozy":"japandi"===t?"japandi":"neoclassic"===t?"neoclassic":"modern"===t?"modern":"fusion"===t?"fusion":"cozy"},t.fromNumber=function(t){return 0===t?"cozy":1===t?"japandi":2===t?"fusion":3===t?"modern":"neoclassic"};class s{static formatCurrency(t){return Intl.NumberFormat("uk-UA",{maximumFractionDigits:2}).format(t)}}var o=(t=>(t[t.uk=0]="uk",t[t.en=1]="en",t))(o||{});class i{constructor(t,e=!1){if(e)switch(t){case 0:this._init();case 1:this._initPortugal();default:this._init()}}get(t){try{return JSON.parse(localStorage.getItem(t))}catch(e){return localStorage.getItem(t)}}set(t,e){localStorage.setItem(t,e.toString())}_init(){this.set("style","cozy"),this.set("bath",!0),this.set("shower",!1),this.set("ceiling","stretch ceiling"),this.set("flooring","laminat"),this.set("hygienic_shower",!1),this.set("second_gypsum_layer",!1),this.set("floor_screed",!1),this.set("heated_flooring",!1),this.set("denoising",!1),this.set("entrance_doors",!1),this.set("conditioning",!1),this.set("amount_of_rooms",2),this.set("amount_of_bathrooms",1),this.set("appliances","gorenje"),this.set("appliances_bool_total",!1),this.set("furniture_bool",!0),this.set("space",50),this.set("color",1)}_initPortugal(){this.set("style","cozy"),this.set("color",1),this.set("space",50),this.set("amount_of_rooms",2),this.set("amount_of_bathrooms",1),this.set("bath",!0),this.set("shower",!1),this.set("flooring","laminat"),this.set("finishing_materials",!1),this.set("demontage",!1),this.set("cement_screed",!1),this.set("heated_flooring",0),this.set("denoising",!1),this.set("entrance_doors",!1),this.set("windows_installation",0),this.set("builtin_furniture",!1),this.set("conditioning",0),this.set("furniture_bool",!1),this.set("appliances_bool_total",!1),this.set("appliances","gorenje"),this.set("transportation_expenses",5)}storageToRequestBody(t){const e={};for(const s in t)"length"!==s&&"costPerMetre"!=s&&"color"!=s&&("true"!==String(t[s])?"false"!==String(t[s])?isFinite(Number(t[s]))?e[s]=Number(t[s]):e[s]=t[s]:e[s]=0:e[s]=1);return JSON.stringify(e)}}$((function(){const t=new i(o.en,!1),n=$("#space"),a=$("#total"),r=$("#totalWhole"),c=$("#totalWholeVAT"),l=function(t,e,s){var o,i,n;void 0===e&&(e=50),void 0===s&&(s={});var a=null!=(o=s.isImmediate)&&o,r=null!=(i=s.callback)&&i,c=s.maxWait,l=Date.now(),h=[];function u(){if(void 0!==c){var t=Date.now()-l;if(t+e>=c)return c-t}return e}var d=function(){var e=[].slice.call(arguments),s=this;return new Promise((function(o,i){var c=a&&void 0===n;if(void 0!==n&&clearTimeout(n),n=setTimeout((function(){if(n=void 0,l=Date.now(),!a){var o=t.apply(s,e);r&&r(o),h.forEach((function(t){return(0,t.resolve)(o)})),h=[]}}),u()),c){var d=t.apply(s,e);return r&&r(d),o(d)}h.push({resolve:o,reject:i})}))};return d.cancel=function(t){void 0!==n&&clearTimeout(n),h.forEach((function(e){return(0,e.reject)(t)})),h=[]},d}((function(){return e=this,o=null,i=function*(){h();const e=yield fetch("https://api.fortes.agency/calc?country=portugal",{body:t.storageToRequestBody(localStorage),headers:{"Content-Type":"application/json"},method:"POST"}),o=yield e.json(),i=parseFloat(o.cost_per_meter);t.set("costPerMetre",i),t.set("summedPrice",i*t.get("space")*1.23),a.html(s.formatCurrency(i)),r.html(s.formatCurrency(i*t.get("space"))),c.html(s.formatCurrency(i*t.get("space")*1.23))},new Promise(((t,s)=>{var n=t=>{try{r(i.next(t))}catch(t){s(t)}},a=t=>{try{r(i.throw(t))}catch(t){s(t)}},r=e=>e.done?t(e.value):Promise.resolve(e.value).then(n,a);r((i=i.apply(e,o)).next())}));var e,o,i}),300);function h(){t.set("space",n.val()),t.set("amount_of_rooms",$("#amountOfRooms").val()),t.set("amount_of_bathrooms",$("#amountOfBathrooms").val()),t.set("windows_installation",$("#amountOfWindows").val()),t.set("demontage",$("#dismantlingWorks").is(":checked")),t.set("heated_flooring",$("#heatedFlooring").val()),t.set("conditioning",$("#conditioning").val()),t.set("builtin_furiture",$("#builtinFurniture").is(":checked")),t.set("cement_screed",$("#cementScreed").is(":checked")),t.set("finishing_materials",$("#finishingMaterials").is(":checked")),t.set("furniture_bool",$("#furnitureBool").is(":checked")),t.set("bath",$("#bathtub").is(":checked")),t.set("shower",$("#shower").is(":checked")),t.set("appliances_bool_total",$("#appliancesBool").is(":checked")),t.set("denoising",$("#noise").is(":checked")),t.set("entrance_doors",$("#doors").is(":checked")),t.set("flooring",$(":radio[name='flooring']:checked").val()),t.set("transportation_expenses",$("#distance").val())}n.val(50),l(),$(".calculator input").not(".form-2 input").on("change",(()=>{h(),l()})),n.on("focusout",(function(){if($(this).val($(this).val().toString().match(/\d*\.?\d+/)),t.set("space",n.val()),0===t.get("space")||0===t.get("amount_of_rooms"))return a.html("0"),void r.html("0");l()})),n.on("focusout",(function(){(parseInt($(this).val().toString())<30||!$(this).val())&&($(this).val(30),t.set("space",n.val()),l())})),$(".increment-field .increment").on("click",(function(e){e.preventDefault();const s=$(this).siblings(".increment-input");if(s.val(parseInt(s.val())+parseInt($(this).val())),"0"===s.val()?"1"===$(this).val()?$(this).siblings(".increment").toggleClass("disabled"):$(this).toggleClass("disabled"):parseInt(s.val())>0&&$(this).siblings(".disabled").toggleClass("disabled"),0==t.get("amount_of_rooms"))return a.html("0"),void r.html("0");l()})),$(".calculator-tab, .tab-new").on("click",(function(){const s=parseInt($(this).data("slider-index"));t.set("style",e.fromNumber(s)),l()})),$(".choice").on("click",(function(){t.set("appliances_bool_total",!0),t.set("appliances",$(this).data("appliances")),l()})),$("#node").on("click",(function(){t.set("appliances_bool_total",!1),l()})),$("#appliancesBool").on("click",(function(){$(this).is(":checked")&&(document.querySelector(".choice-gradient.gradientrevamped")||(t.set("appliances_bool_total",1),t.set("appliances","gorenje"),l()))})),$("#appliancesBool").on("change",(function(){$(this).is(":checked")&&(t.set("appliances_bool_total",!0),l())}))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3pDLE1BQU1qRixFQUFjbUYsU0FBU3JELEVBQUVwQixNQUFNOEUsS0FBSyxpQkFDMUNqRSxFQUFRTCxJQUFJLFFBQVN4QixFQUFZRyxXQUFXRyxJQUU1Q29DLEdBQ0YsSUFtQ0FOLEVBQUUsV0FBV21ELEdBQUcsU0FBUyxXQUN2QjFELEVBQVFMLElBQUkseUJBQXlCLEdBQ3JDSyxFQUFRTCxJQUFJLGFBQWNZLEVBQUVwQixNQUFNOEUsS0FBSyxlQUN2Q3BELEdBQ0YsSUFFQU4sRUFBRSxTQUFTbUQsR0FBRyxTQUFTLFdBQ3JCMUQsRUFBUUwsSUFBSSx5QkFBeUIsR0FFckNrQixHQUNGLElBRUFOLEVBQUUsbUJBQW1CbUQsR0FBRyxTQUFTLFdBQzFCbkQsRUFBRXBCLE1BQU1xRSxHQUFHLGNBR1hVLFNBQVNDLGNBQWMsdUNBQzFCbkUsRUFBUUwsSUFBSSx3QkFBeUIsR0FDckNLLEVBQVFMLElBQUksYUFBYyxXQUUxQmtCLEtBRUosSUFFQU4sRUFBRSxtQkFBbUJtRCxHQUFHLFVBQVUsV0FDNUJuRCxFQUFFcEIsTUFBTXFFLEdBQUcsY0FDYnhELEVBQVFMLElBQUkseUJBQXlCLEdBQ3JDa0IsSUFFSixHQW9ERixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZm9ydGVzLy4vc3JjL21vZGVscy9TdHlsZS50cyIsIndlYnBhY2s6Ly9mb3J0ZXMvLi9zcmMvdXRpbHMvRm9ybWF0dGVyLnRzIiwid2VicGFjazovL2ZvcnRlcy8uL3NyYy91dGlscy9Mb2NhbFN0b3JhZ2VIYW5kbGVyLnRzIiwid2VicGFjazovL2ZvcnRlcy8uL3NyYy9jYWxjdWxhdG9yX3BvcnR1Z2FsLnRzIiwid2VicGFjazovL2ZvcnRlcy8uL25vZGVfbW9kdWxlcy90cy1kZWJvdW5jZS9kaXN0L3NyYy9pbmRleC5lc20uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGVudW0gRGVzaWduU3R5bGUge1xuICBDb3p5ID0gXCJjb3p5XCIsXG4gIEphcGFuZGkgPSBcImphcGFuZGlcIixcbiAgTW9kZXJuID0gXCJtb2Rlcm5cIixcbiAgRnVzaW9uID0gXCJmdXNpb25cIixcbiAgTmVvQ2xhc3NpYyA9IFwibmVvY2xhc3NpY1wiLFxufVxuXG5leHBvcnQgbmFtZXNwYWNlIERlc2lnblN0eWxlIHtcbiAgZXhwb3J0IGZ1bmN0aW9uIGZyb21TdHJpbmcobmFtZTogc3RyaW5nKTogRGVzaWduU3R5bGUge1xuICAgIGlmIChuYW1lID09PSBcImNvenlcIikge1xuICAgICAgcmV0dXJuIERlc2lnblN0eWxlLkNvenk7XG4gICAgfSBlbHNlIGlmIChuYW1lID09PSBcImphcGFuZGlcIikge1xuICAgICAgcmV0dXJuIERlc2lnblN0eWxlLkphcGFuZGk7XG4gICAgfSBlbHNlIGlmIChuYW1lID09PSBcIm5lb2NsYXNzaWNcIikge1xuICAgICAgcmV0dXJuIERlc2lnblN0eWxlLk5lb0NsYXNzaWM7XG4gICAgfSBlbHNlIGlmIChuYW1lID09PSBcIm1vZGVyblwiKSB7XG4gICAgICByZXR1cm4gRGVzaWduU3R5bGUuTW9kZXJuO1xuICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gXCJmdXNpb25cIikge1xuICAgICAgcmV0dXJuIERlc2lnblN0eWxlLkZ1c2lvbjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIERlc2lnblN0eWxlLkNvenk7XG4gICAgfVxuICB9XG5cbiAgZXhwb3J0IGZ1bmN0aW9uIGZyb21OdW1iZXIobnVtYmVyOiBudW1iZXIpOiBEZXNpZ25TdHlsZSB7XG4gICAgcmV0dXJuIG51bWJlciA9PT0gMFxuICAgICAgPyBEZXNpZ25TdHlsZS5Db3p5XG4gICAgICA6IG51bWJlciA9PT0gMVxuICAgICAgPyBEZXNpZ25TdHlsZS5KYXBhbmRpXG4gICAgICA6IG51bWJlciA9PT0gMlxuICAgICAgPyBEZXNpZ25TdHlsZS5GdXNpb25cbiAgICAgIDogbnVtYmVyID09PSAzXG4gICAgICA/IERlc2lnblN0eWxlLk1vZGVyblxuICAgICAgOiBEZXNpZ25TdHlsZS5OZW9DbGFzc2ljO1xuICB9XG59XG4iLCJhYnN0cmFjdCBjbGFzcyBGb3JtYXR0ZXIge1xuICBwdWJsaWMgc3RhdGljIGZvcm1hdEN1cnJlbmN5KG51bTogbnVtYmVyKSB7XG4gICAgcmV0dXJuIEludGwuTnVtYmVyRm9ybWF0KFwidWstVUFcIiwge1xuICAgICAgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiAyLFxuICAgIH0pLmZvcm1hdChudW0pO1xuICB9XG59XG5cbmV4cG9ydCB7IEZvcm1hdHRlciB9O1xuIiwiZW51bSBMb2NhbFN0b3JhZ2VEZXN0aW5hdGlvbiB7XG4gIHVrLFxuICBlbixcbn1cblxuY2xhc3MgTG9jYWxTdG9yYWdlSGFuZGxlciB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGRlc3RpbmF0aW9uOiBMb2NhbFN0b3JhZ2VEZXN0aW5hdGlvbixcbiAgICBzaG91bGRJbml0OiBib29sZWFuID0gZmFsc2VcbiAgKSB7XG4gICAgaWYgKHNob3VsZEluaXQpIHtcbiAgICAgIHN3aXRjaCAoZGVzdGluYXRpb24pIHtcbiAgICAgICAgY2FzZSBMb2NhbFN0b3JhZ2VEZXN0aW5hdGlvbi51azpcbiAgICAgICAgICB0aGlzLl9pbml0KCk7XG4gICAgICAgIGNhc2UgTG9jYWxTdG9yYWdlRGVzdGluYXRpb24uZW46XG4gICAgICAgICAgdGhpcy5faW5pdFBvcnR1Z2FsKCk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhpcy5faW5pdCgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldChuYW1lOiBzdHJpbmcpOiBhbnkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShuYW1lKSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0obmFtZSk7XG4gICAgfVxuICB9XG5cbiAgc2V0KG5hbWU6IHN0cmluZywgdmFsdWU6IGFueSk6IHZvaWQge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKG5hbWUsIHZhbHVlLnRvU3RyaW5nKCkpO1xuICB9XG5cbiAgcHJpdmF0ZSBfaW5pdCgpOiB2b2lkIHtcbiAgICB0aGlzLnNldChcInN0eWxlXCIsIFwiY296eVwiKTtcbiAgICB0aGlzLnNldChcImJhdGhcIiwgdHJ1ZSk7XG4gICAgdGhpcy5zZXQoXCJzaG93ZXJcIiwgZmFsc2UpO1xuICAgIHRoaXMuc2V0KFwiY2VpbGluZ1wiLCBcInN0cmV0Y2ggY2VpbGluZ1wiKTtcbiAgICB0aGlzLnNldChcImZsb29yaW5nXCIsIFwibGFtaW5hdFwiKTtcbiAgICB0aGlzLnNldChcImh5Z2llbmljX3Nob3dlclwiLCBmYWxzZSk7XG4gICAgdGhpcy5zZXQoXCJzZWNvbmRfZ3lwc3VtX2xheWVyXCIsIGZhbHNlKTtcbiAgICB0aGlzLnNldChcImZsb29yX3NjcmVlZFwiLCBmYWxzZSk7XG4gICAgdGhpcy5zZXQoXCJoZWF0ZWRfZmxvb3JpbmdcIiwgZmFsc2UpO1xuICAgIHRoaXMuc2V0KFwiZGVub2lzaW5nXCIsIGZhbHNlKTtcbiAgICB0aGlzLnNldChcImVudHJhbmNlX2Rvb3JzXCIsIGZhbHNlKTtcbiAgICB0aGlzLnNldChcImNvbmRpdGlvbmluZ1wiLCBmYWxzZSk7XG4gICAgdGhpcy5zZXQoXCJhbW91bnRfb2Zfcm9vbXNcIiwgMik7XG4gICAgdGhpcy5zZXQoXCJhbW91bnRfb2ZfYmF0aHJvb21zXCIsIDEpO1xuICAgIHRoaXMuc2V0KFwiYXBwbGlhbmNlc1wiLCBcImdvcmVuamVcIik7XG4gICAgdGhpcy5zZXQoXCJhcHBsaWFuY2VzX2Jvb2xfdG90YWxcIiwgZmFsc2UpO1xuICAgIHRoaXMuc2V0KFwiZnVybml0dXJlX2Jvb2xcIiwgdHJ1ZSk7XG4gICAgdGhpcy5zZXQoXCJzcGFjZVwiLCA1MCk7XG4gICAgdGhpcy5zZXQoXCJjb2xvclwiLCAxKTtcbiAgfVxuXG4gIHByaXZhdGUgX2luaXRQb3J0dWdhbCgpOiB2b2lkIHtcbiAgICB0aGlzLnNldChcInN0eWxlXCIsIFwiY296eVwiKTtcbiAgICB0aGlzLnNldChcImNvbG9yXCIsIDEpO1xuICAgIHRoaXMuc2V0KFwic3BhY2VcIiwgNTApO1xuICAgIHRoaXMuc2V0KFwiYW1vdW50X29mX3Jvb21zXCIsIDIpO1xuICAgIHRoaXMuc2V0KFwiYW1vdW50X29mX2JhdGhyb29tc1wiLCAxKTtcbiAgICB0aGlzLnNldChcImJhdGhcIiwgdHJ1ZSk7XG4gICAgdGhpcy5zZXQoXCJzaG93ZXJcIiwgZmFsc2UpO1xuICAgIHRoaXMuc2V0KFwiZmxvb3JpbmdcIiwgXCJsYW1pbmF0XCIpO1xuICAgIHRoaXMuc2V0KFwiZmluaXNoaW5nX21hdGVyaWFsc1wiLCBmYWxzZSk7XG4gICAgdGhpcy5zZXQoXCJkZW1vbnRhZ2VcIiwgZmFsc2UpO1xuICAgIHRoaXMuc2V0KFwiY2VtZW50X3NjcmVlZFwiLCBmYWxzZSk7XG4gICAgdGhpcy5zZXQoXCJoZWF0ZWRfZmxvb3JpbmdcIiwgMCk7XG4gICAgdGhpcy5zZXQoXCJkZW5vaXNpbmdcIiwgZmFsc2UpO1xuICAgIHRoaXMuc2V0KFwiZW50cmFuY2VfZG9vcnNcIiwgZmFsc2UpO1xuICAgIHRoaXMuc2V0KFwid2luZG93c19pbnN0YWxsYXRpb25cIiwgMCk7XG4gICAgdGhpcy5zZXQoXCJidWlsdGluX2Z1cm5pdHVyZVwiLCBmYWxzZSk7XG4gICAgdGhpcy5zZXQoXCJjb25kaXRpb25pbmdcIiwgMCk7XG4gICAgdGhpcy5zZXQoXCJmdXJuaXR1cmVfYm9vbFwiLCBmYWxzZSk7XG4gICAgdGhpcy5zZXQoXCJhcHBsaWFuY2VzX2Jvb2xfdG90YWxcIiwgZmFsc2UpO1xuICAgIHRoaXMuc2V0KFwiYXBwbGlhbmNlc1wiLCBcImdvcmVuamVcIik7XG4gICAgdGhpcy5zZXQoXCJ0cmFuc3BvcnRhdGlvbl9leHBlbnNlc1wiLCA1KTtcbiAgfVxuXG4gIHN0b3JhZ2VUb1JlcXVlc3RCb2R5KHN0b3JhZ2U6IFN0b3JhZ2UpOiBzdHJpbmcge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuXG4gICAgZm9yIChjb25zdCBrZXkgaW4gc3RvcmFnZSkge1xuICAgICAgaWYgKGtleSA9PT0gXCJsZW5ndGhcIiB8fCBrZXkgPT0gXCJjb3N0UGVyTWV0cmVcIiB8fCBrZXkgPT0gXCJjb2xvclwiKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoU3RyaW5nKHN0b3JhZ2Vba2V5XSkgPT09IFwidHJ1ZVwiKSB7XG4gICAgICAgIHJlc3VsdFtrZXldID0gMTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IGVsc2UgaWYgKFN0cmluZyhzdG9yYWdlW2tleV0pID09PSBcImZhbHNlXCIpIHtcbiAgICAgICAgcmVzdWx0W2tleV0gPSAwO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzRmluaXRlKE51bWJlcihzdG9yYWdlW2tleV0pKSkge1xuICAgICAgICByZXN1bHRba2V5XSA9IE51bWJlcihzdG9yYWdlW2tleV0pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgcmVzdWx0W2tleV0gPSBzdG9yYWdlW2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHJlc3VsdCk7XG4gIH1cbn1cblxuZXhwb3J0IHsgTG9jYWxTdG9yYWdlSGFuZGxlciwgTG9jYWxTdG9yYWdlRGVzdGluYXRpb24gfTtcbiIsImltcG9ydCB7IERlc2lnblN0eWxlIH0gZnJvbSBcIi4vbW9kZWxzL1N0eWxlXCI7XG5pbXBvcnQgeyBGb3JtYXR0ZXIgfSBmcm9tIFwiLi91dGlscy9Gb3JtYXR0ZXJcIjtcbmltcG9ydCB7XG4gIExvY2FsU3RvcmFnZURlc3RpbmF0aW9uLFxuICBMb2NhbFN0b3JhZ2VIYW5kbGVyLFxufSBmcm9tIFwiLi91dGlscy9Mb2NhbFN0b3JhZ2VIYW5kbGVyXCI7XG5pbXBvcnQgeyBkZWJvdW5jZSB9IGZyb20gXCJ0cy1kZWJvdW5jZVwiO1xuXG4kKGZ1bmN0aW9uICgpIHtcbiAgY29uc3Qgc3RvcmFnZTogTG9jYWxTdG9yYWdlSGFuZGxlciA9IG5ldyBMb2NhbFN0b3JhZ2VIYW5kbGVyKFxuICAgIExvY2FsU3RvcmFnZURlc3RpbmF0aW9uLmVuLFxuICAgIGZhbHNlXG4gICk7XG5cbiAgY29uc3QgJHNwYWNlID0gJChcIiNzcGFjZVwiKTtcbiAgY29uc3QgJHRvdGFsID0gJChcIiN0b3RhbFwiKTtcbiAgY29uc3QgJHRvdGFsV2hvbGUgPSAkKFwiI3RvdGFsV2hvbGVcIik7XG4gIGNvbnN0ICR0b3RhbFdob2xlVmF0ID0gJChcIiN0b3RhbFdob2xlVkFUXCIpO1xuXG4gIGNvbnN0IGRlYm91bmNlQ2FsY3VsYXRlID0gZGVib3VuY2UoY2FsY3VsYXRlLCAzMDApO1xuXG4gICRzcGFjZS52YWwoNTApO1xuICBkZWJvdW5jZUNhbGN1bGF0ZSgpO1xuXG4gICQoXCIuY2FsY3VsYXRvciBpbnB1dFwiKVxuICAgIC5ub3QoXCIuZm9ybS0yIGlucHV0XCIpXG4gICAgLm9uKFwiY2hhbmdlXCIsICgpID0+IHtcbiAgICAgIHVwZGF0ZVVzZXJEYXRhKCk7XG4gICAgICBkZWJvdW5jZUNhbGN1bGF0ZSgpO1xuICAgIH0pO1xuXG4gICRzcGFjZS5vbihcImZvY3Vzb3V0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAkKHRoaXMpLnZhbChcbiAgICAgICQodGhpcylcbiAgICAgICAgLnZhbCgpXG4gICAgICAgIC50b1N0cmluZygpXG4gICAgICAgIC5tYXRjaCgvXFxkKlxcLj9cXGQrLylcbiAgICApO1xuXG4gICAgc3RvcmFnZS5zZXQoXCJzcGFjZVwiLCAkc3BhY2UudmFsKCkpO1xuXG4gICAgaWYgKHN0b3JhZ2UuZ2V0KFwic3BhY2VcIikgPT09IDAgfHwgc3RvcmFnZS5nZXQoXCJhbW91bnRfb2Zfcm9vbXNcIikgPT09IDApIHtcbiAgICAgICR0b3RhbC5odG1sKFwiMFwiKTtcbiAgICAgICR0b3RhbFdob2xlLmh0bWwoXCIwXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGRlYm91bmNlQ2FsY3VsYXRlKCk7XG4gIH0pO1xuXG4gICRzcGFjZS5vbihcImZvY3Vzb3V0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAocGFyc2VJbnQoJCh0aGlzKS52YWwoKS50b1N0cmluZygpKSA8IDMwIHx8ICEkKHRoaXMpLnZhbCgpKSB7XG4gICAgICAkKHRoaXMpLnZhbCgzMCk7XG4gICAgICBzdG9yYWdlLnNldChcInNwYWNlXCIsICRzcGFjZS52YWwoKSk7XG5cbiAgICAgIGRlYm91bmNlQ2FsY3VsYXRlKCk7XG4gICAgfVxuICB9KTtcblxuICAkKFwiLmluY3JlbWVudC1maWVsZCAuaW5jcmVtZW50XCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBjb25zdCBpbnB1dCA9ICQodGhpcykuc2libGluZ3MoXCIuaW5jcmVtZW50LWlucHV0XCIpO1xuXG4gICAgaW5wdXQudmFsKFxuICAgICAgcGFyc2VJbnQoaW5wdXQudmFsKCkgYXMgc3RyaW5nKSArIHBhcnNlSW50KCQodGhpcykudmFsKCkgYXMgc3RyaW5nKVxuICAgICk7XG5cbiAgICBpZiAoaW5wdXQudmFsKCkgPT09IFwiMFwiKSB7XG4gICAgICBpZiAoJCh0aGlzKS52YWwoKSA9PT0gXCIxXCIpIHtcbiAgICAgICAgJCh0aGlzKS5zaWJsaW5ncyhcIi5pbmNyZW1lbnRcIikudG9nZ2xlQ2xhc3MoXCJkaXNhYmxlZFwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoXCJkaXNhYmxlZFwiKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHBhcnNlSW50KGlucHV0LnZhbCgpIGFzIHN0cmluZykgPiAwKSB7XG4gICAgICAkKHRoaXMpLnNpYmxpbmdzKFwiLmRpc2FibGVkXCIpLnRvZ2dsZUNsYXNzKFwiZGlzYWJsZWRcIik7XG4gICAgfVxuXG4gICAgaWYgKHN0b3JhZ2UuZ2V0KFwiYW1vdW50X29mX3Jvb21zXCIpID09IDApIHtcbiAgICAgICR0b3RhbC5odG1sKFwiMFwiKTtcbiAgICAgICR0b3RhbFdob2xlLmh0bWwoXCIwXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGRlYm91bmNlQ2FsY3VsYXRlKCk7XG4gIH0pO1xuXG4gICQoXCIuY2FsY3VsYXRvci10YWIsIC50YWItbmV3XCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IG51bTogbnVtYmVyID0gcGFyc2VJbnQoJCh0aGlzKS5kYXRhKFwic2xpZGVyLWluZGV4XCIpKTtcbiAgICBzdG9yYWdlLnNldChcInN0eWxlXCIsIERlc2lnblN0eWxlLmZyb21OdW1iZXIobnVtKSk7XG5cbiAgICBkZWJvdW5jZUNhbGN1bGF0ZSgpO1xuICB9KTtcblxuICAvKiQoXCIjY2FsY3VsYXRlXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHNsaWRlTnVtYmVyOiBudW1iZXIgPSBwYXJzZUludChcbiAgICAgICQoXCIuc2xpZGVyLXRhYi53LS1jdXJyZW50XCIpLmRhdGEoXCJzbGlkZXItaW5kZXhcIilcbiAgICApO1xuICAgIHN0b3JhZ2Uuc2V0KFwic3R5bGVcIiwgRGVzaWduU3R5bGUuZnJvbU51bWJlcihzbGlkZU51bWJlcikpO1xuICAgICQoXCIuY2FsY3VsYXRvci10YWJcIikucmVtb3ZlQ2xhc3MoXCJ3LS1jdXJyZW50XCIpO1xuICAgICQoXCIuY2FsY3VsYXRvci10YWJbZGF0YS1zbGlkZXItaW5kZXg9J1wiICsgc2xpZGVOdW1iZXIgKyBcIiddXCIpLmFkZENsYXNzKFxuICAgICAgXCJ3LS1jdXJyZW50XCJcbiAgICApO1xuICAgIGRlYm91bmNlQ2FsY3VsYXRlKCk7XG4gICAgJChcIi5jYWxjdWxhdG9yLXNsaWRlXCIpLnRvZ2dsZShmYWxzZSk7XG4gICAgJChcIi5jYWxjdWxhdG9yLXNsaWRlLm1haW5cIikudG9nZ2xlKHRydWUpO1xuICAgICQoXCIuY2FsY3VsYXRvci1zbGlkZS5cIiArIHN0b3JhZ2UuZ2V0KFwic3R5bGVcIikpLnRvZ2dsZSh0cnVlKTtcbiAgICAkKFwiLmNhbGN1bGF0b3Itc2xpZGVyLW9wdGlvbi5hY3RpdmVcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgJChcIi5jYWxjdWxhdG9yLXNsaWRlci1vcHRpb246ZXEoMClcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gIH0pO1xuXG4gICQoXCIuY2FsY3VsYXRlY296eVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICBzdG9yYWdlLnNldChcInN0eWxlXCIsIERlc2lnblN0eWxlLkNvenkpO1xuICAgICQoXCJjYWxjdWxhdG9yLXRhYi53LS1jdXJyZW50XCIpLnJlbW92ZUNsYXNzKFwidy0tY3VycmVudFwiKTtcbiAgICAkKFwiLndyYXAtYm9yZGVyLmNhbGN1bGF0b3ItdGFiIC5jdXN0b20tc3R5bGVcIikuY3NzKFwiY29sb3JcIiwgXCJibGFja1wiKTtcbiAgICAkKFwiLndyYXAtYm9yZGVyLmNhbGN1bGF0b3ItdGFiIC5jdXN0b20tc3R5bGVcIikuY3NzKFwiYmFja2dyb3VuZFwiLCBcIndoaXRlXCIpO1xuICAgICQoXCJjYWxjdWxhdG9yLXRhYjplcSgwKVwiKS5hZGRDbGFzcyhcInctLWN1cnJlbnRcIik7XG4gICAgJChcIi5jYWxjdWxhdG9yLXRhYlwiKS5yZW1vdmVDbGFzcyhcInctLWN1cnJlbnRcIik7XG4gICAgJChcIi5jYWxjdWxhdG9yLXRhYjplcSgwKVwiKS5hZGRDbGFzcyhcInctLWN1cnJlbnRcIik7XG4gICAgZGVib3VuY2VDYWxjdWxhdGUoKTtcblxuICAgICQoXCIuY2FsY3VsYXRvci1zbGlkZVwiKS50b2dnbGUoZmFsc2UpO1xuICAgICQoXCIuY2FsY3VsYXRvci1zbGlkZS5tYWluLCAuY2FsY3VsYXRvci1zbGlkZS5jb3p5XCIpLnRvZ2dsZSh0cnVlKTtcbiAgICAkKFwiLmNhbGN1bGF0b3Itc2xpZGVyLW9wdGlvbi5hY3RpdmVcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgJChcIi5jYWxjdWxhdG9yLXNsaWRlci1vcHRpb246ZXEoMClcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gIH0pOyovXG5cbiAgJChcIi5jaG9pY2VcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgc3RvcmFnZS5zZXQoXCJhcHBsaWFuY2VzX2Jvb2xfdG90YWxcIiwgdHJ1ZSk7XG4gICAgc3RvcmFnZS5zZXQoXCJhcHBsaWFuY2VzXCIsICQodGhpcykuZGF0YShcImFwcGxpYW5jZXNcIikpO1xuICAgIGRlYm91bmNlQ2FsY3VsYXRlKCk7XG4gIH0pO1xuXG4gICQoXCIjbm9kZVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICBzdG9yYWdlLnNldChcImFwcGxpYW5jZXNfYm9vbF90b3RhbFwiLCBmYWxzZSk7XG5cbiAgICBkZWJvdW5jZUNhbGN1bGF0ZSgpO1xuICB9KTtcblxuICAkKFwiI2FwcGxpYW5jZXNCb29sXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgIGlmICghJCh0aGlzKS5pcyhcIjpjaGVja2VkXCIpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jaG9pY2UtZ3JhZGllbnQuZ3JhZGllbnRyZXZhbXBlZFwiKSkge1xuICAgICAgc3RvcmFnZS5zZXQoXCJhcHBsaWFuY2VzX2Jvb2xfdG90YWxcIiwgMSk7XG4gICAgICBzdG9yYWdlLnNldChcImFwcGxpYW5jZXNcIiwgXCJnb3JlbmplXCIpO1xuXG4gICAgICBkZWJvdW5jZUNhbGN1bGF0ZSgpO1xuICAgIH1cbiAgfSk7XG5cbiAgJChcIiNhcHBsaWFuY2VzQm9vbFwiKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCQodGhpcykuaXMoXCI6Y2hlY2tlZFwiKSkge1xuICAgICAgc3RvcmFnZS5zZXQoXCJhcHBsaWFuY2VzX2Jvb2xfdG90YWxcIiwgdHJ1ZSk7XG4gICAgICBkZWJvdW5jZUNhbGN1bGF0ZSgpO1xuICAgIH1cbiAgfSk7XG5cbiAgYXN5bmMgZnVuY3Rpb24gY2FsY3VsYXRlKCkge1xuICAgIHVwZGF0ZVVzZXJEYXRhKCk7XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmZXRjaChcbiAgICAgIFwiaHR0cHM6Ly9hcGkuZm9ydGVzLmFnZW5jeS9jYWxjP2NvdW50cnk9cG9ydHVnYWxcIixcbiAgICAgIHtcbiAgICAgICAgYm9keTogc3RvcmFnZS5zdG9yYWdlVG9SZXF1ZXN0Qm9keShsb2NhbFN0b3JhZ2UpLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgIH0sXG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICB9XG4gICAgKTtcblxuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXN1bHQuanNvbigpO1xuICAgIGNvbnN0IGNvc3QgPSBwYXJzZUZsb2F0KGpzb24uY29zdF9wZXJfbWV0ZXIpO1xuXG4gICAgc3RvcmFnZS5zZXQoXCJjb3N0UGVyTWV0cmVcIiwgY29zdCk7XG4gICAgc3RvcmFnZS5zZXQoXCJzdW1tZWRQcmljZVwiLCBjb3N0ICogc3RvcmFnZS5nZXQoXCJzcGFjZVwiKSAqIDEuMjMpO1xuXG4gICAgJHRvdGFsLmh0bWwoRm9ybWF0dGVyLmZvcm1hdEN1cnJlbmN5KGNvc3QpKTtcbiAgICAkdG90YWxXaG9sZS5odG1sKEZvcm1hdHRlci5mb3JtYXRDdXJyZW5jeShjb3N0ICogc3RvcmFnZS5nZXQoXCJzcGFjZVwiKSkpO1xuICAgICR0b3RhbFdob2xlVmF0Lmh0bWwoXG4gICAgICBGb3JtYXR0ZXIuZm9ybWF0Q3VycmVuY3koY29zdCAqIHN0b3JhZ2UuZ2V0KFwic3BhY2VcIikgKiAxLjIzKVxuICAgICk7XG5cbiAgICByZXR1cm47XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVVc2VyRGF0YSgpIHtcbiAgICBzdG9yYWdlLnNldChcInNwYWNlXCIsICRzcGFjZS52YWwoKSk7XG4gICAgc3RvcmFnZS5zZXQoXCJhbW91bnRfb2Zfcm9vbXNcIiwgJChcIiNhbW91bnRPZlJvb21zXCIpLnZhbCgpKTtcbiAgICBzdG9yYWdlLnNldChcImFtb3VudF9vZl9iYXRocm9vbXNcIiwgJChcIiNhbW91bnRPZkJhdGhyb29tc1wiKS52YWwoKSk7XG4gICAgc3RvcmFnZS5zZXQoXCJ3aW5kb3dzX2luc3RhbGxhdGlvblwiLCAkKFwiI2Ftb3VudE9mV2luZG93c1wiKS52YWwoKSk7XG4gICAgc3RvcmFnZS5zZXQoXCJkZW1vbnRhZ2VcIiwgJChcIiNkaXNtYW50bGluZ1dvcmtzXCIpLmlzKFwiOmNoZWNrZWRcIikpO1xuICAgIHN0b3JhZ2Uuc2V0KFwiaGVhdGVkX2Zsb29yaW5nXCIsICQoXCIjaGVhdGVkRmxvb3JpbmdcIikudmFsKCkpO1xuICAgIHN0b3JhZ2Uuc2V0KFwiY29uZGl0aW9uaW5nXCIsICQoXCIjY29uZGl0aW9uaW5nXCIpLnZhbCgpKTtcbiAgICAvL21pc3Rha2UgaXMgb24gcHVycG9zZVxuICAgIHN0b3JhZ2Uuc2V0KFwiYnVpbHRpbl9mdXJpdHVyZVwiLCAkKFwiI2J1aWx0aW5GdXJuaXR1cmVcIikuaXMoXCI6Y2hlY2tlZFwiKSk7XG4gICAgc3RvcmFnZS5zZXQoXCJjZW1lbnRfc2NyZWVkXCIsICQoXCIjY2VtZW50U2NyZWVkXCIpLmlzKFwiOmNoZWNrZWRcIikpO1xuICAgIHN0b3JhZ2Uuc2V0KFwiZmluaXNoaW5nX21hdGVyaWFsc1wiLCAkKFwiI2ZpbmlzaGluZ01hdGVyaWFsc1wiKS5pcyhcIjpjaGVja2VkXCIpKTtcbiAgICBzdG9yYWdlLnNldChcImZ1cm5pdHVyZV9ib29sXCIsICQoXCIjZnVybml0dXJlQm9vbFwiKS5pcyhcIjpjaGVja2VkXCIpKTtcbiAgICBzdG9yYWdlLnNldChcImJhdGhcIiwgJChcIiNiYXRodHViXCIpLmlzKFwiOmNoZWNrZWRcIikpO1xuICAgIHN0b3JhZ2Uuc2V0KFwic2hvd2VyXCIsICQoXCIjc2hvd2VyXCIpLmlzKFwiOmNoZWNrZWRcIikpO1xuICAgIHN0b3JhZ2Uuc2V0KFwiYXBwbGlhbmNlc19ib29sX3RvdGFsXCIsICQoXCIjYXBwbGlhbmNlc0Jvb2xcIikuaXMoXCI6Y2hlY2tlZFwiKSk7XG4gICAgc3RvcmFnZS5zZXQoXCJkZW5vaXNpbmdcIiwgJChcIiNub2lzZVwiKS5pcyhcIjpjaGVja2VkXCIpKTtcbiAgICBzdG9yYWdlLnNldChcImVudHJhbmNlX2Rvb3JzXCIsICQoXCIjZG9vcnNcIikuaXMoXCI6Y2hlY2tlZFwiKSk7XG4gICAgc3RvcmFnZS5zZXQoXCJmbG9vcmluZ1wiLCAkKFwiOnJhZGlvW25hbWU9J2Zsb29yaW5nJ106Y2hlY2tlZFwiKS52YWwoKSk7XG4gICAgc3RvcmFnZS5zZXQoXCJ0cmFuc3BvcnRhdGlvbl9leHBlbnNlc1wiLCAkKFwiI2Rpc3RhbmNlXCIpLnZhbCgpKTtcbiAgfVxufSk7XG4iLCJmdW5jdGlvbiByKHIsZSxuKXt2YXIgaSx0LG87dm9pZCAwPT09ZSYmKGU9NTApLHZvaWQgMD09PW4mJihuPXt9KTt2YXIgYT1udWxsIT0oaT1uLmlzSW1tZWRpYXRlKSYmaSx1PW51bGwhPSh0PW4uY2FsbGJhY2spJiZ0LGM9bi5tYXhXYWl0LHY9RGF0ZS5ub3coKSxsPVtdO2Z1bmN0aW9uIGYoKXtpZih2b2lkIDAhPT1jKXt2YXIgcj1EYXRlLm5vdygpLXY7aWYocitlPj1jKXJldHVybiBjLXJ9cmV0dXJuIGV9dmFyIGQ9ZnVuY3Rpb24oKXt2YXIgZT1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cyksbj10aGlzO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihpLHQpe3ZhciBjPWEmJnZvaWQgMD09PW87aWYodm9pZCAwIT09byYmY2xlYXJUaW1lb3V0KG8pLG89c2V0VGltZW91dChmdW5jdGlvbigpe2lmKG89dm9pZCAwLHY9RGF0ZS5ub3coKSwhYSl7dmFyIGk9ci5hcHBseShuLGUpO3UmJnUoaSksbC5mb3JFYWNoKGZ1bmN0aW9uKHIpe3JldHVybigwLHIucmVzb2x2ZSkoaSl9KSxsPVtdfX0sZigpKSxjKXt2YXIgZD1yLmFwcGx5KG4sZSk7cmV0dXJuIHUmJnUoZCksaShkKX1sLnB1c2goe3Jlc29sdmU6aSxyZWplY3Q6dH0pfSl9O3JldHVybiBkLmNhbmNlbD1mdW5jdGlvbihyKXt2b2lkIDAhPT1vJiZjbGVhclRpbWVvdXQobyksbC5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybigwLGUucmVqZWN0KShyKX0pLGw9W119LGR9ZXhwb3J0e3IgYXMgZGVib3VuY2V9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtLmpzLm1hcFxuIl0sIm5hbWVzIjpbIkRlc2lnblN0eWxlIiwiZnJvbVN0cmluZyIsIm5hbWUiLCJmcm9tTnVtYmVyIiwibnVtYmVyIiwiRm9ybWF0dGVyIiwibnVtIiwiSW50bCIsIk51bWJlckZvcm1hdCIsIm1heGltdW1GcmFjdGlvbkRpZ2l0cyIsImZvcm1hdCIsIkxvY2FsU3RvcmFnZURlc3RpbmF0aW9uIiwiTG9jYWxTdG9yYWdlSGFuZGxlciIsImNvbnN0cnVjdG9yIiwiZGVzdGluYXRpb24iLCJzaG91bGRJbml0IiwidGhpcyIsIl9pbml0IiwiX2luaXRQb3J0dWdhbCIsImdldCIsIkpTT04iLCJwYXJzZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzZXQiLCJ2YWx1ZSIsInNldEl0ZW0iLCJ0b1N0cmluZyIsInN0b3JhZ2VUb1JlcXVlc3RCb2R5Iiwic3RvcmFnZSIsInJlc3VsdCIsImtleSIsIlN0cmluZyIsImlzRmluaXRlIiwiTnVtYmVyIiwic3RyaW5naWZ5IiwiJCIsImVuIiwiJHNwYWNlIiwiJHRvdGFsIiwiJHRvdGFsV2hvbGUiLCIkdG90YWxXaG9sZVZhdCIsImRlYm91bmNlQ2FsY3VsYXRlIiwiciIsImUiLCJuIiwiaSIsInQiLCJvIiwiYSIsImlzSW1tZWRpYXRlIiwidSIsImNhbGxiYWNrIiwiYyIsIm1heFdhaXQiLCJ2IiwiRGF0ZSIsIm5vdyIsImwiLCJmIiwiZCIsInNsaWNlIiwiY2FsbCIsImFyZ3VtZW50cyIsIlByb21pc2UiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiYXBwbHkiLCJmb3JFYWNoIiwicmVzb2x2ZSIsInB1c2giLCJyZWplY3QiLCJjYW5jZWwiLCJ1cGRhdGVVc2VyRGF0YSIsImZldGNoIiwiYm9keSIsImhlYWRlcnMiLCJtZXRob2QiLCJqc29uIiwiY29zdCIsInBhcnNlRmxvYXQiLCJjb3N0X3Blcl9tZXRlciIsImh0bWwiLCJmb3JtYXRDdXJyZW5jeSIsInZhbCIsImlzIiwibm90Iiwib24iLCJtYXRjaCIsInBhcnNlSW50IiwicHJldmVudERlZmF1bHQiLCJpbnB1dCIsInNpYmxpbmdzIiwidG9nZ2xlQ2xhc3MiLCJkYXRhIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIl0sInNvdXJjZVJvb3QiOiIifQ==