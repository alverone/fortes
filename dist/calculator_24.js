(()=>{"use strict";class e{static formatCurrency(e){return Intl.NumberFormat("uk-UA",{maximumFractionDigits:2}).format(e)}}class t{constructor(e,t){this.address=e,this._value=t}hasValue(){return null!==this._value&&this._value.length>0}value(){return this._value}numeric(){return parseFloat(this._value)}formattedNumerical(){return e.formatCurrency(parseFloat(this.value()))}}class s{constructor(e){this.cells=e}getCell(e){const s=this.cells.filter((t=>t.address===e));return 0==s.length?new t(e,"0"):s[0]}}class o{static numberToEncodedLetter(e){if(isNaN(e))return;let t,s=(e=Math.abs(Math.floor(e)))%26,o=e/26;return e<=26?this.numToLetter(e):(o>=1&&(0===s&&o--,t=this.numberToEncodedLetter(o)),0===s&&(s=26),t+this.numToLetter(s))}static numToLetter(e){if(!(e>26||e<0))return 0===e?"":this.alphabet.slice(e-1,e)}}o.alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZ";class a{get(e){try{return JSON.parse(localStorage.getItem(e))}catch(t){return localStorage.getItem(e)}}set(e,t){localStorage.setItem(e,t.toString())}init(){this.set("style","cozy"),this.set("bath",!0),this.set("shower",!1),this.set("ceiling","stretch ceiling"),this.set("flooring","laminat"),this.set("hygienic_shower",!1),this.set("second_gypsum_layer",!1),this.set("floor_screed",!1),this.set("heated_flooring",!1),this.set("denoising",!1),this.set("entrance_doors",!1),this.set("conditioning",!1),this.set("amount_of_rooms",2),this.set("amount_of_bathrooms",1),this.set("appliances","gorenje"),this.set("appliances_bool_total",!1),this.set("furniture_bool",!0),this.set("space",50)}initPortugal(){this.set("style","cozy"),this.set("color",1),this.set("space",50),this.set("amount_of_rooms",2),this.set("amount_of_bathrooms",1),this.set("bath",!0),this.set("shower",!1),this.set("flooring","laminat"),this.set("finishing_materials",!1),this.set("demontage",!1),this.set("cement_screed",!1),this.set("heated_flooring",0),this.set("denoising",!1),this.set("entrance_doors",!1),this.set("windows_installation",0),this.set("builtin_furniture",!1),this.set("conditioning",0),this.set("furniture_bool",!1),this.set("appliances_bool_total",!1),this.set("appliances","gorenje"),this.set("transportation_expenses",5)}storageToRequestBody(e){const t={};for(const s in e)"length"!==s&&"costPerMetre"!=s&&("true"!==String(e[s])?"false"!==String(e[s])?isFinite(Number(e[s]))?t[s]=Number(e[s]):t[s]=e[s]:t[s]=0:t[s]=1);return JSON.stringify(t)}}var i,l=(e=>(e.Cozy="cozy",e.Japandi="japandi",e.Modern="modern",e.Fusion="fusion",e.NeoClassic="neoclassic",e))(l||{});(i=l||(l={})).fromString=function(e){return"cozy"===e?"cozy":"japandi"===e?"japandi":"neoclassic"===e?"neoclassic":"modern"===e?"modern":"fusion"===e?"fusion":"cozy"},i.fromNumber=function(e){return 0===e?"cozy":1===e?"japandi":2===e?"fusion":3===e?"modern":"neoclassic"},$((function(){fetch("https://docs.google.com/spreadsheets/d/1KkkpKbytztt48mwP1RGgpVFpfke8-IqB0KLWA8Sn2FE/gviz/tq?tqx=out:json").then((e=>e.text())).then((e=>{const a=JSON.parse(e.substring(e.length-2,0).replace("/*O_o*/\ngoogle.visualization.Query.setResponse(","")).table.rows,i=new s(a.map(((e,s)=>e.c.map((function(e,a){if(null!==e&&null!==e.v)return new t(`${o.numberToEncodedLetter(a+1)}${s+1}`,e.v)})).filter((e=>null!=e)))).reduce(((e,t)=>[...e,...t])));$("#dollarCourse").html(i.getCell("G7").formattedNumerical())}));const i=new a;function n(){return c(),fetch("https://api.fortes.agency/calc",{body:i.storageToRequestBody(localStorage),headers:{"Content-Type":"application/json"},method:"POST"}).then((e=>e.json())).then((t=>{const s=parseFloat(t.cost_per_meter);i.set("costPerMetre",s),i.set("summedPrice",t.cost_per_meter*i.get("space")),$("#total").html(e.formatCurrency(s)),$("#totalWhole").html(e.formatCurrency(s*i.get("space")))}))}function c(){i.set("space",$("#space").val()),i.set("amount_of_rooms",$("#amountOfRooms").val()),i.set("amount_of_bathrooms",$("#amountOfBathrooms").val()),i.set("heated_flooring",$("#heatedFlooring").val()),i.set("conditioning",$("#conditioning").val()),i.set("hygienic_shower",$("#hygienicShower").is(":checked")),i.set("second_gypsum_layer",$("#secondGypsumLayer").is(":checked")),i.set("furniture_bool",$("#furnitureBool").is(":checked")),i.set("bath",$("#bathtub").is(":checked")),i.set("shower",$("#shower").is(":checked")),i.set("appliances_bool_total",$("#appliancesBool").is(":checked")),i.set("floor_screed",$("#floorscreed").is(":checked")),i.set("denoising",$("#noise").is(":checked")),i.set("entrance_doors",$("#doors").is(":checked")),i.set("ceiling",$(":radio[name='ceiling']:checked").val()),i.set("flooring",$(":radio[name='flooring']:checked").val()),i.set("color",$(".div-block-14 .color-tab.active").index())}function r(e){0==e?i.set("style","cozy"):2==e?i.set("style","fusion"):1==e?i.set("style","japandi"):3==e?i.set("style","modern"):4==e&&i.set("style","neoclassic")}$("#space").val(50),i.init(),n(),$(".calculator input").not(".form-2 input").on("change",(()=>{c(),n()})),$("#space").on("focusout",(function(){if($(this).val($(this).val().toString().match(/\d*\.?\d+/)),i.set("space",$("#space").val()),0===i.get("space")||0===i.get("amount_of_rooms"))return $("#total").html("0"),void $("#totalWhole").html("0");n()})),$(".slider-tab").on("click",(function(){r($(this).data("slider-index")),n()})),$("#space").on("focusout",(function(){(parseInt($(this).val().toString())<30||!$(this).val())&&($(this).val(30),i.set("space",$("#space").val()),n())})),$(".increment-field .increment").on("click",(function(e){if(e.preventDefault(),$(this).siblings(".increment-input").val(parseInt($(this).siblings(".increment-input").val())+parseInt($(this).val())),"0"===$(this).siblings(".increment-input").val()?"1"===$(this).val()?$(this).siblings(".increment").toggleClass("disabled"):$(this).toggleClass("disabled"):parseInt($(this).siblings(".increment-input").val())>0&&$(this).siblings(".disabled").toggleClass("disabled"),0==i.get("amount_of_rooms"))return $("#total").html("0"),void $("#totalWhole").html("0");n()})),$(".calculator-tab, .tab-new").on("click",(function(){r(parseInt($(this).data("slider-index"))),n()})),$("#calculate").on("click",(function(){const e=parseInt($(".slider-tab.w--current").data("slider-index"));r(e),$(".calculator-tab").removeClass("w--current"),$(".calculator-tab[data-slider-index='"+e+"']").addClass("w--current"),n(),$(".calculator-slide").toggle(!1),$(".calculator-slide.main").toggle(!0),$(".calculator-slide."+i.get("style")).toggle(!0),$(".calculator-slider-option.active").removeClass("active"),$(".calculator-slider-option:eq(0)").addClass("active")})),$(".calculatecozy").on("click",(function(){i.set("style",l.Cozy),$("calculator-tab.w--current").removeClass("w--current"),$(".wrap-border.calculator-tab .custom-style").css("color","black"),$(".wrap-border.calculator-tab .custom-style").css("background","white"),$("calculator-tab:eq(0)").addClass("w--current"),$(".calculator-tab").removeClass("w--current"),$(".calculator-tab:eq(0)").addClass("w--current"),n(),$(".calculator-slide").toggle(!1),$(".calculator-slide.main, .calculator-slide.cozy").toggle(!0),$(".calculator-slider-option.active").removeClass("active"),$(".calculator-slider-option:eq(0)").addClass("active")})),$(".choice").on("click",(function(){$("#node").is(":checked")&&($(".choiceActiveBorder").removeClass("choiceActiveBorder"),$(this).parent().toggleClass("choiceActiveBorder"),$("#appliancesBool").prop("checked",!0),$("#node").siblings("div").removeClass("w--redirected-checked"),$("#appliancesBool").siblings("div").addClass("w--redirected-checked")),i.set("appliances_bool_total",!0),i.set("appliances",$(this).data("appliances")),n()})),$("#node").on("click",(function(){i.set("appliances_bool_total",!1),n()})),$("#appliancesBool").on("click",(function(){$(this).is(":checked")&&(document.querySelector(".choiceActiveBorder")||(i.set("appliances_bool_total",1),i.set("appliances","gorenje"),n()))})),$("#appliancesBool").on("change",(function(){$(this).is(":checked")&&(i.set("appliances_bool_total",!0),n())})),$(window).width()<992&&($(".calculator-tab.w--current, .slider-tab.w--current").toggleClass("w--current"),$(".slide, .calculator-slide, .header-cozy, .wrap-border.calculator-btn").toggle(!1),$(".slide.main, .calculator-slide.main, .slide.japandi, .calculator-slide.japandi, .wrap-border.calculator-btn.specification-japandi.color-1").toggle(!0),$(".calculator-tab:eq(1), .slider-tab:eq(1)").toggleClass("w--current"),$(".header-japandi").toggle(!0),i.set("style",l.Japandi),n())}))})();