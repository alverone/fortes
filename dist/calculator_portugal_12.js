(()=>{"use strict";var t,e=(t=>(t.Cozy="cozy",t.Japandi="japandi",t.Modern="modern",t.Fusion="fusion",t.NeoClassic="neoclassic",t))(e||{});(t=e||(e={})).fromString=function(t){return"cozy"===t?"cozy":"japandi"===t?"japandi":"neoclassic"===t?"neoclassic":"modern"===t?"modern":"fusion"===t?"fusion":"cozy"},t.fromNumber=function(t){return 0===t?"cozy":1===t?"japandi":2===t?"fusion":3===t?"modern":"neoclassic"};class s{static formatCurrency(t){return Intl.NumberFormat("uk-UA",{maximumFractionDigits:2}).format(t)}}class o{get(t){try{return JSON.parse(localStorage.getItem(t))}catch(e){return localStorage.getItem(t)}}set(t,e){localStorage.setItem(t,e.toString())}init(){this.set("style","cozy"),this.set("bath",!0),this.set("shower",!1),this.set("ceiling","stretch ceiling"),this.set("flooring","laminat"),this.set("hygienic_shower",!1),this.set("second_gypsum_layer",!1),this.set("floor_screed",!1),this.set("heated_flooring",!1),this.set("denoising",!1),this.set("entrance_doors",!1),this.set("conditioning",!1),this.set("amount_of_rooms",2),this.set("amount_of_bathrooms",1),this.set("appliances","gorenje"),this.set("appliances_bool_total",!1),this.set("furniture_bool",!0),this.set("space",50)}initPortugal(){this.set("style","cozy"),this.set("space",50),this.set("amount_of_rooms",2),this.set("amount_of_bathrooms",1),this.set("bath",!0),this.set("shower",!1),this.set("flooring","laminat"),this.set("finishing_materials",!1),this.set("demontage",!1),this.set("cement_screed",!1),this.set("heated_flooring",0),this.set("denoising",!1),this.set("entrance_doors",!1),this.set("windows_installation",0),this.set("builtin_furniture",!1),this.set("conditioning",0),this.set("furniture_bool",!1),this.set("appliances_bool_total",!1),this.set("appliances","gorenje"),this.set("transportation_expenses",5)}storageToRequestBody(t){const e={};for(const s in t)"length"!==s&&"costPerMetre"!=s&&("true"!==String(t[s])?"false"!==String(t[s])?isFinite(Number(t[s]))?e[s]=Number(t[s]):e[s]=t[s]:e[s]=0:e[s]=1);return JSON.stringify(e)}}$((function(){const t=new o,a=$("#space"),i=$("#total"),n=$("#totalWhole"),c=function(t,e,s){var o,a,i;void 0===e&&(e=50),void 0===s&&(s={});var n=null!=(o=s.isImmediate)&&o,c=null!=(a=s.callback)&&a,r=s.maxWait,l=Date.now(),u=[];function d(){if(void 0!==r){var t=Date.now()-l;if(t+e>=r)return r-t}return e}var h=function(){var e=[].slice.call(arguments),s=this;return new Promise((function(o,a){var r=n&&void 0===i;if(void 0!==i&&clearTimeout(i),i=setTimeout((function(){if(i=void 0,l=Date.now(),!n){var o=t.apply(s,e);c&&c(o),u.forEach((function(t){return(0,t.resolve)(o)})),u=[]}}),d()),r){var h=t.apply(s,e);return c&&c(h),o(h)}u.push({resolve:o,reject:a})}))};return h.cancel=function(t){void 0!==i&&clearTimeout(i),u.forEach((function(e){return(0,e.reject)(t)})),u=[]},h}(r,300);function r(){return e=this,o=null,a=function*(){l();const e=yield fetch("https://api.fortes.agency/calc?country=portugal",{body:t.storageToRequestBody(localStorage),headers:{"Content-Type":"application/json"},method:"POST"}),o=yield e.json(),a=parseFloat(o.cost_per_meter);t.set("costPerMetre",a),t.set("summedPrice",a*t.get("space")*1.23),i.html(s.formatCurrency(a)),n.html(s.formatCurrency(a*t.get("space"))),$("#totalWholeVAT").html(s.formatCurrency(a*t.get("space")*1.23))},new Promise(((t,s)=>{var i=t=>{try{c(a.next(t))}catch(t){s(t)}},n=t=>{try{c(a.throw(t))}catch(t){s(t)}},c=e=>e.done?t(e.value):Promise.resolve(e.value).then(i,n);c((a=a.apply(e,o)).next())}));var e,o,a}function l(){t.set("space",a.val()),t.set("amount_of_rooms",$("#amountOfRooms").val()),t.set("amount_of_bathrooms",$("#amountOfBathrooms").val()),t.set("windows_installation",$("#amountOfWindows").val()),t.set("demontage",$("#dismantlingWorks").is(":checked")),t.set("heated_flooring",$("#heatedFlooring").val()),t.set("conditioning",$("#conditioning").val()),t.set("builtin_furiture",$("#builtinFurniture").is(":checked")),t.set("cement_screed",$("#cementScreed").is(":checked")),t.set("finishing_materials",$("#finishingMaterials").is(":checked")),t.set("furniture_bool",$("#furnitureBool").is(":checked")),t.set("bath",$("#bathtub").is(":checked")),t.set("shower",$("#shower").is(":checked")),t.set("appliances_bool_total",$("#appliancesBool").is(":checked")),t.set("denoising",$("#noise").is(":checked")),t.set("entrance_doors",$("#doors").is(":checked")),t.set("flooring",$(":radio[name='flooring']:checked").val()),t.set("transportation_expenses",$("#distance").val())}a.val(50),t.initPortugal(),c(),$(".calculator input").not(".form-2 input").on("change",(()=>{l(),c()})),a.on("focusout",(function(){if($(this).val($(this).val().toString().match(/\d*\.?\d+/)),t.set("space",a.val()),0===t.get("space")||0===t.get("amount_of_rooms"))return i.html("0"),void n.html("0");c()})),$(".slider-tab").on("click",(function(){t.set("style",e.fromNumber($(this).data("slider-index"))),c()})),a.on("focusout",(function(){(parseInt($(this).val().toString())<30||!$(this).val())&&($(this).val(30),t.set("space",a.val()),c())})),$(".increment-field .increment").on("click",(function(e){e.preventDefault();const s=$(this).siblings(".increment-input");if(s.val(parseInt(s.val())+parseInt($(this).val())),"0"===s.val()?"1"===$(this).val()?$(this).siblings(".increment").toggleClass("disabled"):$(this).toggleClass("disabled"):parseInt(s.val())>0&&$(this).siblings(".disabled").toggleClass("disabled"),0==t.get("amount_of_rooms"))return i.html("0"),void n.html("0");c()})),$(".calculator-tab, .tab-new").on("click",(function(){const s=parseInt($(this).data("slider-index"));t.set("style",e.fromNumber(s)),c()})),$("#calculate").on("click",(function(){const s=parseInt($(".slider-tab.w--current").data("slider-index"));t.set("style",e.fromNumber(s)),$(".calculator-tab").removeClass("w--current"),$(".calculator-tab[data-slider-index='"+s+"']").addClass("w--current"),c(),$(".calculator-slide").toggle(!1),$(".calculator-slide.main").toggle(!0),$(".calculator-slide."+t.get("style")).toggle(!0),$(".calculator-slider-option.active").removeClass("active"),$(".calculator-slider-option:eq(0)").addClass("active")})),$(".calculatecozy").on("click",(function(){t.set("style",e.Cozy),$("calculator-tab.w--current").removeClass("w--current"),$(".wrap-border.calculator-tab .custom-style").css("color","black"),$(".wrap-border.calculator-tab .custom-style").css("background","white"),$("calculator-tab:eq(0)").addClass("w--current"),$(".calculator-tab").removeClass("w--current"),$(".calculator-tab:eq(0)").addClass("w--current"),c(),$(".calculator-slide").toggle(!1),$(".calculator-slide.main, .calculator-slide.cozy").toggle(!0),$(".calculator-slider-option.active").removeClass("active"),$(".calculator-slider-option:eq(0)").addClass("active")})),$(".choice").on("click",(function(){$("#node").is(":checked")&&($(".choiceActiveBorder").removeClass("choiceActiveBorder"),$(this).parent().toggleClass("choiceActiveBorder"),$("#appliancesBool").prop("checked",!0),$("#node").siblings("div").removeClass("w--redirected-checked"),$("#appliancesBool").siblings("div").addClass("w--redirected-checked")),t.set("appliances_bool_total",!0),t.set("appliances",$(this).data("appliances")),c()})),$("#node").on("click",(function(){t.set("appliances_bool_total",!1),c()})),$("#appliancesBool").on("click",(function(){$(this).is(":checked")&&(document.querySelector(".choiceActiveBorder")||(t.set("appliances_bool_total",1),t.set("appliances","gorenje"),c()))})),$("#appliancesBool").on("change",(function(){$(this).is(":checked")&&(t.set("appliances_bool_total",!0),c())})),$(window).width()<992&&($(".calculator-tab.w--current, .slider-tab.w--current").toggleClass("w--current"),$(".slide, .calculator-slide, .header-cozy, .wrap-border.calculator-btn").toggle(!1),$(".slide.main, .calculator-slide.main, .slide.japandi, .calculator-slide.japandi, .wrap-border.calculator-btn.specification-japandi.color-1").toggle(!0),$(".calculator-tab:eq(1), .slider-tab:eq(1)").toggleClass("w--current"),$(".header-japandi").toggle(!0),t.set("style",e.Japandi),r())}))})();