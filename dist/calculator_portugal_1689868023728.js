(()=>{"use strict";var A={},f=(e=>(e.Cozy="cozy",e.Japandi="japandi",e.Modern="modern",e.Fusion="fusion",e.NeoClassic="neoclassic",e))(f||{});(e=>{function t(n){return n==="japandi"?"japandi":n==="neoclassic"?"neoclassic":n==="modern"?"modern":n==="fusion"?"fusion":"cozy"}e.fromString=t;function s(n){return n===0?"cozy":n===1?"japandi":n===2?"fusion":n===3?"modern":"neoclassic"}e.fromNumber=s;function i(n){switch(n){case"neoclassic":return"\u041D\u0435\u043E \u041A\u043B\u0430\u0441\u0438\u043A\u0430";case"japandi":return"\u0414\u0436\u0430\u043F\u0430\u043D\u0434\u0456";case"fusion":return"\u0424\u044C\u044E\u0436\u043D";case"modern":return"\u041C\u043E\u0434\u0435\u0440\u043D";case"cozy":default:return"\u041A\u043E\u0437\u0456"}}e.inUkrainian=i})(f||(f={}));class p{static formatCurrency(t){return Intl.NumberFormat("uk-UA",{maximumFractionDigits:2}).format(t)}}var m=(e=>(e[e.uk=0]="uk",e[e.en=1]="en",e))(m||{});class k{constructor(t,s=!1){if(s)switch(t){case 0:this._init();case 1:this._initPortugal();default:this._init()}}get(t){try{return JSON.parse(localStorage.getItem(t))}catch(s){return localStorage.getItem(t)}}set(t,s){localStorage.setItem(t,s.toString())}_init(){this.set("style","cozy"),this.set("bath",!0),this.set("shower",!1),this.set("ceiling","stretch ceiling"),this.set("flooring","laminat"),this.set("hygienic_shower",!1),this.set("second_gypsum_layer",!1),this.set("floor_screed",!1),this.set("heated_flooring",!1),this.set("denoising",!1),this.set("entrance_doors",!1),this.set("conditioning",!1),this.set("amount_of_rooms",2),this.set("amount_of_bathrooms",1),this.set("appliances","gorenje"),this.set("appliances_bool_total",!1),this.set("furniture_bool",!0),this.set("space",50),this.set("color",1)}_initPortugal(){this.set("style","cozy"),this.set("color",1),this.set("space",50),this.set("amount_of_rooms",2),this.set("amount_of_bathrooms",1),this.set("bath",!0),this.set("shower",!1),this.set("flooring","laminat"),this.set("finishing_materials",!1),this.set("demontage",!1),this.set("cement_screed",!1),this.set("heated_flooring",0),this.set("denoising",!1),this.set("entrance_doors",!1),this.set("windows_installation",0),this.set("builtin_furniture",!1),this.set("conditioning",0),this.set("furniture_bool",!1),this.set("appliances_bool_total",!1),this.set("appliances","gorenje"),this.set("transportation_expenses",5)}storageToRequestBody(t){const s={};for(const i in t)if(!(i==="length"||i=="costPerMetre"||i=="color")){if(String(t[i])==="true"){s[i]=1;continue}else if(String(t[i])==="false"){s[i]=0;continue}if(isFinite(Number(t[i]))){s[i]=Number(t[i]);continue}s[i]=t[i]}return JSON.stringify(s)}}function y(e,t,s){var i,n,o;t===void 0&&(t=50),s===void 0&&(s={});var h=(i=s.isImmediate)!=null&&i,c=(n=s.callback)!=null&&n,a=s.maxWait,r=Date.now(),l=[];function C(){if(a!==void 0){var u=Date.now()-r;if(u+t>=a)return a-u}return t}var _=function(){var u=[].slice.call(arguments),d=this;return new Promise(function(v,B){var j=h&&o===void 0;if(o!==void 0&&clearTimeout(o),o=setTimeout(function(){if(o=void 0,r=Date.now(),!h){var b=e.apply(d,u);c&&c(b),l.forEach(function(I){return(0,I.resolve)(b)}),l=[]}},C()),j){var g=e.apply(d,u);return c&&c(g),v(g)}l.push({resolve:v,reject:B})})};return _.cancel=function(u){o!==void 0&&clearTimeout(o),l.forEach(function(d){return(0,d.reject)(u)}),l=[]},_}var w=(e,t,s)=>new Promise((i,n)=>{var o=a=>{try{c(s.next(a))}catch(r){n(r)}},h=a=>{try{c(s.throw(a))}catch(r){n(r)}},c=a=>a.done?i(a.value):Promise.resolve(a.value).then(o,h);c((s=s.apply(e,t)).next())});$(function(){const e=new k(m.en,!1),t=$("#space"),s=$("#total"),i=$("#totalWhole"),n=$("#totalWholeVAT"),o=y(h,300);t.val(50),o(),$(".calculator input").not(".form-2 input").on("change",()=>{c(),o()}),t.on("focusout",function(){if($(this).val($(this).val().toString().match(/\d*\.?\d+/)),e.set("space",t.val()),e.get("space")===0||e.get("amount_of_rooms")===0){s.html("0"),i.html("0");return}o()}),t.on("focusout",function(){(parseInt($(this).val().toString())<30||!$(this).val())&&($(this).val(30),e.set("space",t.val()),o())}),$(".increment-field .increment").on("click",function(a){a.preventDefault();const r=$(this).siblings(".increment-input");if(r.val(parseInt(r.val())+parseInt($(this).val())),r.val()==="0"?$(this).val()==="1"?$(this).siblings(".increment").toggleClass("disabled"):$(this).toggleClass("disabled"):parseInt(r.val())>0&&$(this).siblings(".disabled").toggleClass("disabled"),e.get("amount_of_rooms")==0){s.html("0"),i.html("0");return}o()}),$(".calculator-tab, .tab-new").on("click",function(){const a=parseInt($(this).data("slider-index"));e.set("style",f.fromNumber(a)),o()}),$(".choice").on("click",function(){$("#node").is(":checked")&&($(".choiceActiveBorder").removeClass("choiceActiveBorder"),$(this).parent().toggleClass("choiceActiveBorder"),$("#appliancesBool").prop("checked",!0),$("#node").siblings("div").removeClass("w--redirected-checked"),$("#appliancesBool").siblings("div").addClass("w--redirected-checked")),e.set("appliances_bool_total",!0),e.set("appliances",$(this).data("appliances")),o()}),$("#node").on("click",function(){e.set("appliances_bool_total",!1),o()}),$("#appliancesBool").on("click",function(){$(this).is(":checked")&&(document.querySelector(".choiceActiveBorder")||(e.set("appliances_bool_total",1),e.set("appliances","gorenje"),o()))}),$("#appliancesBool").on("change",function(){$(this).is(":checked")&&(e.set("appliances_bool_total",!0),o())});function h(){return w(this,null,function*(){c();const r=yield(yield fetch("https://api.fortes.agency/calc?country=portugal",{body:e.storageToRequestBody(localStorage),headers:{"Content-Type":"application/json"},method:"POST"})).json(),l=parseFloat(r.cost_per_meter);e.set("costPerMetre",l),e.set("summedPrice",l*e.get("space")*1.23),s.html(p.formatCurrency(l)),i.html(p.formatCurrency(l*e.get("space"))),n.html(p.formatCurrency(l*e.get("space")*1.23))})}function c(){e.set("space",t.val()),e.set("amount_of_rooms",$("#amountOfRooms").val()),e.set("amount_of_bathrooms",$("#amountOfBathrooms").val()),e.set("windows_installation",$("#amountOfWindows").val()),e.set("demontage",$("#dismantlingWorks").is(":checked")),e.set("heated_flooring",$("#heatedFlooring").val()),e.set("conditioning",$("#conditioning").val()),e.set("builtin_furiture",$("#builtinFurniture").is(":checked")),e.set("cement_screed",$("#cementScreed").is(":checked")),e.set("finishing_materials",$("#finishingMaterials").is(":checked")),e.set("furniture_bool",$("#furnitureBool").is(":checked")),e.set("bath",$("#bathtub").is(":checked")),e.set("shower",$("#shower").is(":checked")),e.set("appliances_bool_total",$("#appliancesBool").is(":checked")),e.set("denoising",$("#noise").is(":checked")),e.set("entrance_doors",$("#doors").is(":checked")),e.set("flooring",$(":radio[name='flooring']:checked").val()),e.set("transportation_expenses",$("#distance").val())}})})();
