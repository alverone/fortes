# fortes
## Назначение файлов в репозитории:

* logics.js - логика для взаимодействия с калькулятором/слайдерами;
* calculator.js - скрипт для обработи JSON-ответа Google Sheets API;
* specificationmain.js - скрипт для парсинга cookies и составления страницы спецификации;

Остальные скрипты находятся в вебфлоу либо в панели админа, либо в настройках страниц (там же подключаются и эти скрипты).

## Используемые библиотеки/API/внешние скрипты:

* jQuery
* [slick.js](https://kenwheeler.github.io/slick/)
* [default-passive-events](https://unpkg.com/default-passive-events) - скрипт для облегчения проблем со скроллом на мобильных устройствах (которые могут возникать из-за jQuery/slick.js); влияние на остальной код незначительное
* Google Sheets API (конкретнее, запрос к странице и дальнейшая обработка ответа)

## Постановка задачи: сформированную страницу сконвертировать в пдф-файл и отправить на почту/через бота в телеграм
## Варианты решения:
1. Сгенерировать пдф-файл из скриншотов (самый рабочий вариант, но требует нахождения реализации)
2. Сгенерировать пдф-файл из html**(??)** (без экспорта стилей не получится)
~~3. Воспользоваться API онлайн-сервисов~~ (бесплатные сервисы либо не могут сконвертировать в пдф полноценно из-за отсутствия скриптов, либо имеют ограничения в бесплатном плане)

## Использованные для решения вопроса библиотеки, которые не подошли:

1. jsPDF вполне может подойти для формирования пдф из картинок, но не встроенная утилита формированная из html не подходит (не ловит стили)
2. html2canvas ([cannot export tainted canvases](https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image); скорее всего из-за того, что вебфлоу хранит изображения на uploads-ssl.webflow.com)
3. html2pdf (не ловит стили)

## Возможные варианты решения

* node.js [puppeteer](https://github.com/puppeteer/puppeteer) (скриншоты при помощи движка webKit)
* какое-то решение на PHP (но про их работу ничего не могу сказать, потому что не пробовал)
